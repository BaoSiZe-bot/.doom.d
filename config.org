#+TITLE: Abalonemacs
#+author: baosize-bot
#+PROPERTY: header-args

* æ¦‚è¿°
#+begin_quote
â€œI'm rarely happier than when spending an entire day programming my computer to perform automatically a task that would otherwise take me a good ten seconds to do by hand.â€ - Douglas Adams
#+end_quote

æˆ‘ç”¨ [[https://github.com/doomemacs/doomemacs/][Doom Emacs]]ï¼ˆä»¥ä¸‹ç®€ç§°Doomï¼‰ä½œä¸º Emacs åŸºæœ¬é…ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªliterateé…ç½®æ–‡ä»¶, æŒ‡å®šäº†Doomçš„æ‰€æœ‰é…ç½®å¹¶åŒ…å«äº†æ–‡æ¡£ã€‚å¦‚æœå°†è¿™ä¸ªæ–‡ä»¶å¯¼å…¥åˆ° =~/.doom.d/config.org= ï¼ŒDoom ä¼šåœ¨å¯åŠ¨æˆ–æ­¤æ–‡ä»¶å˜åŠ¨æ—¶æ—¶è‡ªåŠ¨ tangle æ­¤æ–‡ä»¶ä¸­çš„ä»£ç åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚

å¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥è€ƒè™‘åœ¨ Emacs Org mode ä¸­æ‰“å¼€å®ƒä»¥è·å¾—æ›´å¥½çš„é˜…è¯»ä½“éªŒ :).

åœ¨æ›´æ”¹å„ç§package.elå’Œinit.elåï¼Œè¯·è®°å¾—è¿è¡Œ =doom sync= ã€‚

è¿™ä¸ªé…ç½®ä»åœ¨ä¸æ–­ä¼˜åŒ–ä¸­ï¼Œç›®å‰å¯åŠ¨é€Ÿåº¦ææ…¢ï¼Œè¾¾ 0.7s ï¼ˆåœ¨ WSL ä¸­æµ‹è¯•ï¼‰ã€‚
** çµæ„Ÿ
- [[https://github.com/cnsunyour/.doom.d][cnsunyour's Doom Emacs]] æœ¬é…ç½®ä¸­ä¸­æ–‡è¾“å…¥æ³•éƒ¨åˆ†å€Ÿé‰´äº†æ­¤å¤„çš„å†™æ³•ã€‚
- [[https://github.com/manateelazycat/lazycat-emacs][Lazycat Emacs]] æœ¬é…ç½®ä¸­åŠæ•°æ’ä»¶å–æäºæ­¤ã€‚
- [[https://seagle0128.github.io/.emacs.d][Centaur Emacs]] æœ¬é…ç½®ä¸­ UI é…ç½®ç»å¤§å¤šæ•°ç”±æ­¤è€Œæ¥ã€‚
- [[https://github.com/h0cheung/doom-emacs-config][H-cheung's Doom Emacs]] æœ¬é…ç½®åŸºäºæ­¤ä¿®æ”¹è€Œæ¥ã€‚
** æˆªå›¾
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot1.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot2.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot3.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot4.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot5.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot6.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot7.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot8.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot9.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot10.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot11.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot12.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot13.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot14.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot15.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot16.png]]
[[https://raw.githubusercontent.com/BaoSiZe-bot/.doom.d/screenshots/assets/screenshot17.png]]

* ç›®å½• :QUOTE:TOC_3:
#+BEGIN_QUOTE
- [[#æ¦‚è¿°][æ¦‚è¿°]]
  - [[#çµæ„Ÿ][çµæ„Ÿ]]
  - [[#æˆªå›¾][æˆªå›¾]]
- [[#initel][init.el]]
- [[#configel][config.el]]
- [[#packagesel][packages.el]]
- [[#ä¸ªäººæ¨¡å—][ä¸ªäººæ¨¡å—]]
  - [[#meow][meow]]
  - [[#baosize][baosize]]
    - [[#awesome-tray][awesome-tray]]
    - [[#blink-search][blink-search]]
    - [[#color-rg][color-rg]]
    - [[#eaf][EAF]]
    - [[#holo-layer][holo-layer]]
    - [[#sort-tab][sort-tab]]
    - [[#popweb][popweb]]
    - [[#chinese][chinese]]
    - [[#corfu-english-helper][corfu-english-helper]]
    - [[#treesit-context][treesit-context]]
    - [[#vterm-run][vterm-run]]
    - [[#winum][winum]]
    - [[#symbol-overlay][symbol-overlay]]
    - [[#super-save][super-save]]
    - [[#keyfreq][keyfreq]]
    - [[#colorful-mode][colorful-mode]]
    - [[#emacs-lsp-booster][emacs-lsp-booster]]
    - [[#nyan][nyan]]
    - [[#avy-thing-edit][avy-thing-edit]]
    - [[#super-eglot][super-eglot]]
    - [[#dape][dape]]
    - [[#gemini-cli][gemini-cli]]
    - [[#showkey][showkey]]
#+END_QUOTE

* init.el
æœ¬éƒ¨åˆ†å†³å®šäº† Doom æ‰€å¯ç”¨çš„æ¨¡å—å’ŒåŠ è½½é¡ºåºã€‚

è¿™æ˜¯æˆ‘ä¸ªäººçš„é…ç½®ï¼Œä¸å®¢åˆ¶åŒ–ï¼Œè€Œæˆ‘å·²ç»ç†Ÿç»ƒäº† Doom çš„å¿«æ·é”®ï¼Œæ‰€ä»¥ Dashboard å¯¹æˆ‘æ¥è¯´å¹¶ä¸é‡è¦ã€‚

åœ¨ C++ ä¸­è‡ªåŠ¨æ ¼å¼åŒ–ä¸æ˜¯ä¸ªå¥½æƒ³æ³•ï¼Œå°¤å…¶å½“è®¾ç½®äº†è‡ªåŠ¨ä¿å­˜æ—¶ã€‚
#+begin_src emacs-lisp :tangle init.el
;;; init.el -*- lexical-binding: t; -*-

;; This file controls what Doom modules are enabled and what order they load
;; in. Remember to run 'doom sync' after modifying it!

;; NOTE Press 'SPC h d h' (or 'C-h d h' for non-vim users) to access Doom's
;;      documentation. There you'll find a link to Doom's Module Index where all
;;      of our modules are listed, including what flags they support.

;; NOTE Move your cursor over a module's name (or its flags) and press 'K' (or
;;      'C-c c k' for non-vim users) to view its documentation. This works on
;;      flags as well (those symbols that start with a plus).
;;
;;      Alternatively, press 'gd' (or 'C-c c d') on a module to browse its
;;      directory (for easy access to its source code).
(setq initial-frame-alist '((top . 0.5)
                            (left . 0.5)
                            (width . 0.628)
                            (height . 0.8)
                            (fullscreen)))
(setq use-package-always-defer t)
(doom! :input
       ;;bidi              ; (tfel ot) thgir etirw uoy gnipleh
       ;;chinese
       ;;japanese
       ;;layout            ; auie,ctsrnm is the superior home row

       :completion
       ;;(company +childframe)          ; the ultimate code completion backend
       (corfu +icons +orderless +dabbrev)    ; complete with cap(f), cape and a flying feather!
       ;;helm              ; the *other* search engine for love and life
       ;;ido               ; the other *other* search engine...
       ;;ivy               ; a search engine for love and life
       (vertico +icons +childframe)    ; the search engine of the future

       :ui
       ;; deft              ; notational velocity for Emacs
       doom                ; what makes DOOM look the way it does
       ;; doom-dashboard    ; a nifty splash screen for Emacs
       ;; doom-quit         ; DOOM quit-message prompts when you quit Emacs
       ;; (emoji +ascii +github)    ; ğŸ™‚
       hl-todo             ; highlight TODO/FIXME/NOTE/DEPRECATED/HACK/REVIEW
       ;; indent-guides    ; highlighted indent columns
       ;; ligatures        ; ligatures and symbols to make your code pretty again
       ;; minimap          ; show a map of the code on the side
       modeline            ; snazzy, Atom-inspired modeline, plus API
       ;; nav-flash           ; blink cursor line after big motions
       ;; neotree           ; a project drawer, like NERDTree for vim
       ophints             ; highlight the region an operation acts on
       (popup +defaults)    ; tame sudden yet inevitable temporary windows
       ;; tabs              ; a tab bar for Emacs
       ;; treemacs            ; a project drawer, like neotree but cooler
       unicode             ; extended unicode support for various languages
       (vc-gutter +pretty) ; vcs diff in the fringe
       ;; vi-tilde-fringe   ; fringe tildes to mark beyond EOB
       window-select    ; visually switch windows
       ;; workspaces          ; tab emulation, persistence & separate workspaces
       ;; zen                 ; distraction-free coding or writing

       :editor
       meow                ; come to the dark side, we have cookies
       ;; file-templates      ; auto-snippets for empty files
       ;; fold                ; (nigh) universal code folding
       format              ; automated prettiness
       ;;god               ; run Emacs commands without modifier keys
       ;;lispy             ; vim for lisp, for people who don't like vim
       multiple-cursors    ; editing in many places at once
       ;;objed             ; text object editing for the innocent
       ;;parinfer          ; turn lisp into python, sort of
       ;;rotate-text       ; cycle region at point between text candidates
       snippets            ; my elves. They type so I don't have to
       ;;word-wrap         ; soft wrapping with language-aware indent

       :emacs
       ;; (dired +icons)      ; making dired pretty [functional]
       ;;electric          ; smarter, keyword-based electric-indent
       ;;eww               ; the internet is gross
       (ibuffer +icons)    ; interactive buffer management
       undo                ; persistent, smarter undo for your inevitable mistakes
       vc                  ; version-control and Emacs, sitting in a tree

       :term
       eshell            ; the elisp shell that works everywhere
       ;;shell             ; simple shell REPL for Emacs
       ;;term              ; basic terminal emulator for Emacs
       vterm               ; the best terminal emulation in Emacs

       :checkers
       (syntax +flymake)             ; tasing you for every semicolon you forget
       ;;(spell +flyspell) ; tasing you for misspelling mispelling
       ;;grammar           ; tasing grammar mistake every you make

       :tools
       ;;ansible
       ;;biblio            ; Writes a PhD for you (citation needed)
       ;;collab            ; buffers with friends
       debugger            ; FIXME stepping through code, to help you add bugs
       ;;direnv
       ;;docker
       editorconfig        ; let someone else argue about tabs vs spaces
       ;;ein               ; tame Jupyter notebooks with emacs
       eval                ; run code, run (also, repls)
       lookup              ; navigate your code and its documentation
       ;;(lsp +eglot)        ; M-x vscode
       magit               ; a git porcelain for Emacs
       ;;make              ; run make tasks from Emacs
       ;;pass              ; password manager for nerds
       ;;pdf               ; pdf enhancements
       ;;prodigy           ; FIXME managing external services & code builders
       ;;terraform         ; infrastructure as code
       ;;tmux              ; an API for interacting with tmux
       ;;tree-sitter       ; syntax and parsing, sitting in a tree...
       ;;upload            ; map local to remote projects via ssh/ftp

       :os
       (:if (featurep :system 'macos) macos)  ; improve compatibility with macOS
       ;; (tty +osc)          ; improve the terminal Emacs experience

       :lang
       ;;agda              ; types of types of types of types...
       ;;beancount         ; mind the GAAP
       ;;(cc +lsp)         ; C > C++ == 1
       ;;clojure           ; java with a lisp
       ;;common-lisp       ; if you've seen one lisp, you've seen them all
       ;;coq               ; proofs-as-programs
       ;;crystal           ; ruby at the speed of c
       ;;csharp            ; unity, .NET, and mono shenanigans
       ;;data              ; config/data formats
       ;;(dart +flutter)   ; paint ui and not much else
       ;;dhall
       ;;elixir            ; erlang done right
       ;;elm               ; care for a cup of TEA?
       emacs-lisp          ; drown in parentheses
       ;;erlang            ; an elegant language for a more civilized age
       ;;ess               ; emacs speaks statistics
       ;;factor
       ;;faust             ; dsp, but you get to keep your soul
       ;;fortran           ; in FORTRAN, GOD is REAL (unless declared INTEGER)
       ;;fsharp            ; ML stands for Microsoft's Language
       ;;fstar             ; (dependent) types and (monadic) effects and Z3
       ;;gdscript          ; the language you waited for
       ;;(go +lsp)         ; the hipster dialect
       ;;(graphql +lsp)    ; Give queries a REST
       ;;(haskell +lsp)    ; a language that's lazier than I am
       ;;hy                ; readability of scheme w/ speed of python
       ;;idris             ; a language you can depend on
       ;;json              ; At least it ain't XML
       ;;(java +lsp)       ; the poster child for carpal tunnel syndrome
       ;;javascript        ; all(hope(abandon(ye(who(enter(here))))))
       ;;julia             ; a better, faster MATLAB
       ;;kotlin            ; a better, slicker Java(Script)
       latex               ; writing papers in Emacs has never been so fun
       ;;lean              ; for folks with too much to prove
       ;;ledger            ; be audit you can be
       ;;lua               ; one-based indices? one-based indices
       (markdown +grip)    ; writing docs for people to ignore
       ;;nim               ; python + lisp at the speed of c
       ;;nix               ; I hereby declare "nix geht mehr!"
       ;;ocaml             ; an objective camel
       (org +pretty)       ; organize your plain life in plain text
       ;;php               ; perl's insecure younger brother
       ;;plantuml          ; diagrams for confusing people more
       ;;graphviz          ; diagrams for confusing yourself even more
       ;;purescript        ; javascript, but functional
       ;;python            ; beautiful is better than ugly
       ;;qt                ; the 'cutest' gui framework ever
       ;;racket            ; a DSL for DSLs
       ;;raku              ; the artist formerly known as perl6
       ;;rest              ; Emacs as a REST client
       ;;rst               ; ReST in peace
       ;;(ruby +rails)     ; 1.step {|i| p "Ruby is #{i.even? ? 'love' : 'life'}"}
       ;;(rust +lsp)       ; Fe2O3.unwrap().unwrap().unwrap().unwrap()
       ;;scala             ; java, but good
       ;;(scheme +guile)   ; a fully conniving family of lisps
       ;;sh                ; she sells {ba,z,fi}sh shells on the C xor
       ;;sml
       ;;solidity          ; do you need a blockchain? No.
       ;;swift             ; who asked for emoji variables?
       ;;terra             ; Earth and Moon in alignment for performance.
       ;;web               ; the tubes
       ;;yaml              ; JSON, but readable
       ;;zig               ; C, but simpler

       :app
       calendar
       ;;emms
       ;;everywhere        ; *leave* Emacs!? You must be joking
       ;;irc               ; how neckbeards socialize
       ;;(rss +org)        ; emacs as an RSS reader

       :email
       ;;(mu4e +org +gmail)
       ;;notmuch
       ;;(wanderlust +gmail)

       :config
       literate
       ;;use-package
       (default +bindings)

       :baosize
       chinese
       ;; awesome-tray
       holo-layer
       eaf
       popweb
       blink-search
       sort-tab
       corfu-english-helper
       color-rg
       nyan
       treesit-context
       symbol-overlay
       winum
       super-save
       ;; keyfreq
       (emacs-lsp-booster +eglot)
       colorful-mode
       avy-thing-edit
       super-eglot
       vterm-run
       gemini-cli
       dape)
#+end_src
* config.el
:PROPERTIES:
:header-args: :tangle config.el
:END:
#+begin_src emacs-lisp
;;; config.el -*- lexical-binding: t; -*-
(use-package clipetty
  :hook (doom-after-init . global-clipetty-mode))
(let ((win32yank (executable-find "win32yank.exe")))
  (when win32yank
    (setq select-enable-clipboard t
          save-interprogram-paste-before-kill t)

    (setq interprogram-cut-function
          (lambda (text &optional _push)
            (let* ((process-connection-type nil)
                   (coding-system-for-write 'utf-8-unix)
                   (proc (start-process "win32yank" nil
                                        win32yank "-i" "--crlf")))
              (process-send-string proc text)
              (process-send-eof proc))))

    (setq interprogram-paste-function
          (lambda ()
            (let* ((coding-system-for-read 'utf-8-unix)
                   (out (with-output-to-string
                          (call-process win32yank nil standard-output nil "-o" "--lf"))))
              (unless (string= out "") out))))))


#+end_src
85%çœŸé€æ˜ï¼ˆåªé€æ˜èƒŒæ™¯ï¼Œä¸é€æ˜æ–‡å­—ï¼‰
#+begin_src emacs-lisp
;; (add-to-list 'default-frame-alist '(alpha-background . 85))
#+end_src
nord ä¸»é¢˜
#+begin_src emacs-lisp
(setq catppuccin-flavor 'frappe) 
(if (or (display-graphic-p) (daemonp))
(setq doom-theme 'catppuccin)
(setq doom-theme 'doom-dracula))
#+end_src
JetBrains Mono & éœé¹œæ–‡æ¥·ï¼Œemojiè®¾ç½®ç‰¹æ®Šå­—ä½“
#+begin_src emacs-lisp
(setq doom-font (font-spec :family "JetBrainsMono Nerd Font" :size 18 :weight 'Regular)
      doom-symbol-font (font-spec :family "LXGW WenKai Mono GB" :size 18 :weight 'Regular)
      doom-variable-pitch-font (font-spec :family "LXGW WenKai Mono GB" :size 18 :weight 'Regular)
      doom-big-font (font-spec :family "JetBrainsMono Nerd Font" :size 22  :weight 'Regular)
      nerd-icons-font-family "JetBrainsMono Nerd Font")
(defun +font-set-emoji (&rest _)
  (set-fontset-font t 'emoji "Noto Color Emoji" nil 'prepend))
(add-hook 'after-setting-font-hook #'+font-set-emoji)
#+end_src
å¹³æ»‘æ»šåŠ¨
#+begin_src emacs-lisp
(when (display-graphic-p)
  (setq mouse-wheel-scroll-amount '(1 ((shift) . hscroll))
        mouse-wheel-scroll-amount-horizontal 1
        mouse-wheel-progressive-speed nil))
(setq scroll-step 1
      scroll-margin 0
      scroll-conservatively 100000
      auto-window-vscroll nil
      scroll-preserve-screen-position t)
(if (fboundp 'pixel-scroll-precision-mode)
    (pixel-scroll-precision-mode t))
#+end_src
Centaur Emacs ä¸­çš„ä¸€äº›åŸºç¡€è®¾ç½®
#+begin_src emacs-lisp
(use-package simple
  :hook ((after-init . size-indication-mode)
         (text-mode . visual-line-mode)
         ((prog-mode markdown-mode conf-mode) . enable-trailing-whitespace))
  :init
  (setq column-number-mode t
        line-number-mode t
        kill-whole-line t               ; Kill line including '\n'
        line-move-visual nil
        track-eol t                     ; Keep cursor at end of lines. Require line-move-visual is nil.
        set-mark-command-repeat-pop t)  ; Repeating C-SPC after popping mark pops it again

  ;; Visualize TAB, (HARD) SPACE, NEWLINE
  (setq-default show-trailing-whitespace nil) ; Don't show trailing whitespace by default
  (defun enable-trailing-whitespace ()
    "Show trailing spaces and delete on saving."
    (setq show-trailing-whitespace t)
    (add-hook 'before-save-hook #'delete-trailing-whitespace nil t))

  ;; Prettify the process list
  (with-no-warnings
    (defun my-list-processes--prettify ()
      "Prettify process list."
      (when-let* ((entries tabulated-list-entries))
        (setq tabulated-list-entries nil)
        (dolist (p (process-list))
          (when-let* ((val (cadr (assoc p entries)))
                      (name (aref val 0))
                      (pid (aref val 1))
                      (status (aref val 2))
                      (status (list status
                                    'face
                                    (if (memq status '(stop exit closed failed))
                                        'error
                                      'success)))
                      (buf-label (aref val 3))
                      (tty (list (aref val 4) 'face 'font-lock-doc-face))
                      (thread (list (aref val 5) 'face 'font-lock-doc-face))
                      (cmd (list (aref val 6) 'face 'completions-annotations)))
            (push (list p (vector name pid status buf-label tty thread cmd))
		          tabulated-list-entries)))))
    (advice-add #'list-processes--refresh :after #'my-list-processes--prettify)))
#+end_src
Treesitter é»˜è®¤çš„é«˜äº®å¤ªç´ äº†ï¼Œä½†æ˜¯å®šä¹‰å¤šäº†å½±å“é€Ÿåº¦ï¼Œè®¾ç½®ä¸€ä¸‹jit-lock-defer-time
#+begin_src emacs-lisp
(setq treesit-font-lock-level 4
      major-mode-remap-alist
      '((yaml-mode . yaml-ts-mode)
        (sh-mode . bash-ts-mode)
        (js-mode . js-ts-mode)
        (css-mode . css-ts-mode)
        (c-mode . c-ts-mode)
        (c++-mode . c++-ts-mode)
        (c-or-c++-mode . c-or-c++-ts-mode)
        (python-mode . python-ts-mode)))
(defun my-fontify-variable (node override start end &rest _)
  (let ((parent (treesit-node-parent node)) tyn)
    (catch 'break
      (while parent
        (setq tyn (treesit-node-type parent))
        (cond ((or (equal tyn "call_expression") (equal tyn "template_function"))
               (progn
                 (treesit-fontify-with-override (treesit-node-start node) (treesit-node-end node) 'font-lock-function-call-face override start end)
                 (throw 'break nil))))
        (cond ((or (equal tyn "argument_list") (equal tyn "field_expression")) (progn (setq parent nil) (throw 'break nil))))
        (cond (t (setq parent (treesit-node-parent parent))))))
    (when (not parent) (treesit-fontify-with-override (treesit-node-start node) (treesit-node-end node) 'font-lock-variable-use-face override start end))))
(advice-add 'c-ts-mode--fontify-variable :around (lambda (fn &rest args) (eval `(my-fontify-variable ,@args))))
(defun my-c-font-lock-settings (fn mode)
  (if (eq mode 'cpp)
      `(
        ,@(treesit-font-lock-rules
           :language 'cpp
           :feature 'function
           '((destructor_name (identifier) @font-lock-function-name-face))
           ;; :language mode
           ;; :feature 'property
           ;; '((template_method (field_identifier) @font-lock-function-call-face))
           )
        ,@(funcall fn mode))
    (funcall fn mode)))
(advice-add 'c-ts-mode--font-lock-settings :around 'my-c-font-lock-settings)
;; (add-hook 'meow-insert-mode-hook (lambda () (setq jit-lock-defer-time 0.25)))
;; (add-hook 'meow-normal-mode-hook (lambda () (setq jit-lock-defer-time 0)))
#+end_src
è®¾ç½® flymake è¡Œæœ«æ˜¾ç¤º diagnostics
#+begin_src emacs-lisp
(setq flymake-show-diagnostics-at-end-of-line t)
#+end_src
C++ ç¼©è¿›å’Œè°ƒè¯•
#+begin_src emacs-lisp
(setq-default c-ts-mode-indent-offset 4)
(setq-default c-basic-offset 4)
(use-package eglot
     :hook ((prog-mode . (lambda ()
                           (unless (derived-mode-p
                                    'emacs-lisp-mode 'lisp-mode
                                    'makefile-mode 'snippet-mode
                                    'ron-mode)
                             (eglot-ensure))))
            ((markdown-mode yaml-mode yaml-ts-mode) . eglot-ensure))
     :bind (("C-c c a" . eglot-code-actions)
            ("C-c c r" . eglot-rename)
            ("C-c c j" . consult-eglot-symbols))
     :init
     (setq read-process-output-max (* 1024 1024)) ; 1MB
     (setq eglot-autoshutdown t
           eglot-events-buffer-size 0
           eglot-send-changes-idle-time 0.5))
(add-hook 'c++-ts-mode-hook (lambda ()
;; (rainbow-delimiters-mode-enable)
(treesit-context)
(bind-key "C-c d c" #'cpp-gdb 'c++-ts-mode-map)
(defun cpp-gdb ()
  "open compile and C++ debug"
  (interactive)
  (if buffer-file-name
      (let ((filename (file-name-sans-extension (file-name-nondirectory buffer-file-name))))
        (when (eq 0 (shell-command (concat "g++ -g3 -std=c++17 " buffer-file-name " -o /tmp/cpp-" filename)))
          (gdb (concat "gdb -i=mi /tmp/cpp-" filename))))
    (message "buffer-file-name is nil")))))
#+end_src
é”®ç»‘å®š
#+begin_src emacs-lisp
(bind-keys ("C-c f o" . consult-org-agenda)
           ("C-s" . consult-line))
#+end_src
ç”±äºæœ¬äººä½¿ç”¨fishä½œä¸ºé»˜è®¤shellæ‰€ä»¥è¦åšä¸€ç‚¹æ“ä½œæ‰è¡Œ
#+begin_src emacs-lisp
(setq shell-file-name (executable-find "bash"))
(setq-default vterm-shell (executable-find "fish"))
(setq-default explicit-shell-file-name (executable-find "fish"))
#+end_src
æ˜¾ç¤ºæ—¶é—´
#+begin_src emacs-lisp
(use-package time
  :init (setq display-time-default-load-average nil
              display-time-format "%H:%M"))
(display-time-mode)
#+end_src
è®©ç¬¦å·æ›´æ¼‚äº®
#+begin_src emacs-lisp
(setq-default prettify-symbols-alist
  '(("[ ]"            . ?ï‚–)
    ("[-]"            . ?ï…‡)
    ("[X]"            . ?ï†)
    (":PROPERTIES:"   . ?ï€‹)
    (":ID:"           . ?ğŸªª)
    (":END:"          . ?ğŸ”š)
    ("#+ARCHIVE:"     . ?ğŸ“¦)
    ("#+AUTHOR:"      . ?ğŸ‘¤)
    ("#+CREATOR:"     . ?ğŸ’)
    ("#+DATE:"        . ?ğŸ“†)
    ("#+DESCRIPTION:" . ?â¸™)
    ("#+EMAIL:"       . ?ğŸ“§)
    ("#+HEADERS"      . ?â˜°)
    ("#+OPTIONS:"     . ?âš™)
    ("#+SETUPFILE:"   . ?âš’)
    ("#+TAGS:"        . ?ğŸ·)
    ("#+TITLE:"       . ?ğŸ““)
    ("#+BEGIN_SRC"    . ?âœ)
    ("#+END_SRC"      . ?â–¡)
    ("#+BEGIN_QUOTE"  . ?Â«)
    ("#+END_QUOTE"    . ?Â»)
    ("#+RESULTS:"     . ?ğŸ’»)
    ("lambda" . ?Î»)
    ("<-"     . ?â†)
    ("->"     . ?â†’)
    ("->>"    . ?â† )
    ("=>"     . ?â‡’)
    ("map"    . ?â†¦)
    ("/="     . ?â‰ )
    ("!="     . ?â‰ )
    ("=="     . ?â‰¡)
    ("<="     . ?â‰¤)
    (">="     . ?â‰¥)
    ("=<<"    . (?= (Br . Bl) ?â‰ª))
    (">>="    . (?â‰« (Br . Bl) ?=))
    ("<=<"    . ?â†¢)
    (">=>"    . ?â†£)
    ("&&"     . ?âˆ§)
    ("||"     . ?âˆ¨)
    ("not"    . ?Â¬)))
(setq prettify-symbols-unprettify-at-point 'right-edge)
(global-prettify-symbols-mode 1)
(add-hook 'prog-mode-hook #'prettify-symbols-mode)
(add-hook 'org-mode-hook #'prettify-symbols-mode)
(add-hook 'org-mode-hook #'+org-pretty-mode)
#+end_src
æ”¯æŒ FooBar ç±» subword ç§»åŠ¨
#+begin_src emacs-lisp
(global-subword-mode)
#+end_src
è®¾ç½®æ‹¬å·åŒ¹é…ï¼Œç”¨ç»¿è‰²é«˜äº®
#+begin_src emacs-lisp 
(use-package paren
  :custom-face
  (show-paren-match ((((class color) (background light))
                      (:box (:line-width (-1 . -1) :color "gray70")))
                     (((class color) (background dark))
                      (:box (:line-width (-1 . -1) :color "gray50")))))
  :hook (after-init . show-paren-mode)
  :init (setq show-paren-when-point-inside-paren t
              show-paren-when-point-in-periphery t)
  :custom
  (blink-matching-paren-highlight-offscreen t))
#+end_src
è®¾ç½® doom-modeline
#+begin_src emacs-lisp
(setq doom-modeline-major-mode-icon t
      doom-modeline-major-mode-color-icon t)
#+end_src
æ‰“å¼€é¢åŒ…å±‘å¯¼èˆª
#+begin_src emacs-lisp
(when (modulep! :tools lsp +lsp)
  (add-hook 'lsp-mode-hook #'lsp-headerline-breadcrumb-mode))
#+end_src
æ‚¬æµ®çª—å£

corfu è²Œä¼¼ä¸åº”è¯¥å‡ºç°åœ¨è¿™é‡Œï¼Œä½†æ˜¯ä¸æ”¾è¿™é‡Œå°±æ²¡æ³•å·¥ä½œ
#+begin_src emacs-lisp 
(standard-display-unicode-special-glyphs) ; ç»ˆç«¯ä¸­çš„å¼¹çª—ä¸è®¾ç½®ä¼šä½¿ç”¨ASCIIè¾¹æ¡†
(use-package posframe
    :init
    (defface posframe-border
      `((t (:inherit region)))
      "Face used by the `posframe' border."
      :group 'posframe)
    (defvar posframe-border-width 2
      "Default posframe border width.")
    :config
    (with-no-warnings
      (defun my-posframe--prettify-frame (&rest _)
        (set-face-background 'fringe nil posframe--frame))
      (advice-add #'posframe--create-posframe :after #'my-posframe--prettify-frame)

      (defun posframe-poshandler-frame-center-near-bottom (info)
        (cons (/ (- (plist-get info :parent-frame-width)
                    (plist-get info :posframe-width))
                 2)
              (/ (+ (plist-get info :parent-frame-height)
                    (* 2 (plist-get info :font-height)))
                 2)))))
(use-package! org-modern
  :after org
  :config
  (add-hook 'org-mode-hook #'org-modern-mode))
(use-package transient-posframe
    :defines posframe-border-width
    :custom-face
    (transient-posframe ((t (:inherit tooltip))))
    (transient-posframe-border ((t (:inherit posframe-border :background unspecified))))
    :init
    (setq transient-posframe-border-width posframe-border-width
          transient-posframe-min-width 80
          transient-posframe-min-height nil
          transient-posframe-poshandler 'posframe-poshandler-point-frame-center
          transient-posframe-parameters '((left-fringe . 8)
                                          (right-fringe . 8)))
    :config
    (with-no-warnings
      ;; FIXME:https://github.com/yanghaoxie/transient-posframe/issues/5#issuecomment-1974871665
      (defun my-transient-posframe--show-buffer (buffer _alist)
        "Show BUFFER in posframe and we do not use _ALIST at this period."
        (when (posframe-workable-p)
          (let* ((posframe
                      (posframe-show buffer
                                           :font transient-posframe-font
                                           :position (point)
                                           :poshandler transient-posframe-poshandler
                                           :background-color (face-attribute 'transient-posframe :background nil t)
                                           :foreground-color (face-attribute 'transient-posframe :foreground nil t)
                                           :initialize #'transient-posframe--initialize
                                           :min-width transient-posframe-min-width
                                           :min-height transient-posframe-min-height
                                           :internal-border-width transient-posframe-border-width
                                           :internal-border-color (face-attribute 'transient-posframe-border :background nil t)
                                           :override-parameters transient-posframe-parameters)))
            (frame-selected-window posframe))))
      (advice-add #'transient-posframe--show-buffer :override #'my-transient-posframe--show-buffer)

      (setq transient-mode-line-format nil) ; without line

      (defun transient-posframe--initialize ()
        "Initialize transient posframe."
        (setq window-resize-pixelwise t)
        (setq window-size-fixed nil))

      (defun transient-posframe--resize (window)
        "Resize transient posframe."
        (fit-frame-to-buffer-1 (window-frame window)
                               nil transient-posframe-min-height
                               nil transient-posframe-min-width))
      (advice-add 'transient--fit-window-to-buffer :override #'transient-posframe--resize)

      (defun my-transient-posframe--hide ()
        "Hide transient posframe."
        (posframe-hide transient--buffer-name))
      (advice-add #'transient-posframe--delete :override #'my-transient-posframe--hide))
    (transient-posframe-mode 1))
(setq vertico-posframe-poshandler #'posframe-poshandler-point-window-center
      vertico-posframe-parameters '((left-fringe  . 8)(right-fringe . 8)))
(with-eval-after-load 'xref
    (setq xref-show-xrefs-function #'consult-xref
          xref-show-definitions-function #'consult-xref))
(with-eval-after-load 'corfu
(use-package corfu
  :custom
  (corfu-preselect 'first)
  (corfu-auto t)
  (corfu-auto-prefix 2)
  (corfu-count 12)
  (corfu-preview-current nil)
  (corfu-on-exact-match nil)
  (corfu-auto-delay 0)
  (corfu-popupinfo-delay '(0.4 . 0.2))
  (global-corfu-modes '((not erc-mode
                             circe-mode
                             help-mode
                             gud-mode
                             vterm-mode)
                        t))
  :custom-face
  (corfu-border ((t (:inherit region :background unspecified))))
  :hook ((after-init . global-corfu-mode)
         (global-corfu-mode . corfu-popupinfo-mode)
         (global-corfu-mode . corfu-history-mode))
  :config
  (add-hook 'before-save-hook #'corfu-quit)
  (defun my-eglot-capf-with-yasnippet ()
    (setq-local completion-at-point-functions
                (list
	             (cape-capf-super
		          #'eglot-completion-at-point
		          #'yasnippet-capf))))
  (add-hook 'eglot-managed-mode-hook #'my-eglot-capf-with-yasnippet)
  (bind-keys :map corfu-map
   ("C-SPC"    . corfu-insert-separator)
   ("C-n"      . corfu-next)
   ("C-p"      . corfu-previous)
   ("M-p"      . corfu-popupinfo-scroll-up)
   ("M-n"      . corfu-popupinfo-scroll-down)
   ("M-d"      . corfu-popupinfo-toggle)
   ("RET"      . corfu-insert)
   ("C-x C-f"  . cape-file)))
;; A few more useful configurations...
(use-package emacs
  :custom
  ;; TAB cycle if there are only few candidates
  ;; (completion-cycle-threshold 3)

  ;; Enable indentation+completion using the TAB key.
  ;; `completion-at-point' is often bound to M-TAB.
  (tab-always-indent 'complete)

  ;; Emacs 30 and newer: Disable Ispell completion function. As an alternative,
  ;; try `cape-dict'.
  (text-mode-ispell-word-completion nil)

  ;; Emacs 28 and newer: Hide commands in M-x which do not apply to the current
  ;; mode.  Corfu commands are hidden, since they are not used via M-x. This
  ;; setting is useful beyond Corfu.
  (read-extended-command-predicate #'command-completion-default-include-p))

(use-package nerd-icons-corfu
  :autoload nerd-icons-corfu-formatter
  :after corfu
  :init (add-to-list 'corfu-margin-formatters #'nerd-icons-corfu-formatter))

;; Add extensions
(use-package cape
  :commands (cape-file cape-elisp-block cape-keyword)
  :autoload (cape-wrap-noninterruptible cape-wrap-nonexclusive cape-wrap-buster)
  :autoload (cape-wrap-silent cape-wrap-purify)
  :init
  ;; (add-to-list 'completion-at-point-functions #'cape-dabbrev)
  (add-to-list 'completion-at-point-functions #'cape-file)
  (add-to-list 'completion-at-point-functions #'cape-elisp-block)
  (add-to-list 'completion-at-point-functions #'cape-keyword)
  ;; (add-to-list 'completion-at-point-functions #'cape-abbrev)

  ;; Make these capfs composable.
  (advice-add 'lsp-completion-at-point :around #'cape-wrap-noninterruptible)
  (advice-add 'lsp-completion-at-point :around #'cape-wrap-nonexclusive)
  (advice-add 'comint-completion-at-point :around #'cape-wrap-nonexclusive)
  (advice-add 'eglot-completion-at-point :around #'cape-wrap-buster)
  (advice-add 'eglot-completion-at-point :around #'cape-wrap-nonexclusive)
  (advice-add 'pcomplete-completions-at-point :around #'cape-wrap-nonexclusive)))

(when (and (display-graphic-p) (not (daemonp)))
(require 'nova-utils)
(use-package nova
  :defer 3
  :defer-incrementally nova-vertico nova-corfu
  :config
  (require 'vertico-posframe)
  (require 'orderless)
  (nova-vertico-mode)
  (require 'corfu)
  (nova-corfu-mode)
  ;; (nova-corfu-popupinfo-mode)
  (require 'markdown-mode)
  (require 'nova-utils)
  (require 'eldoc-box)
  (nova-eldoc-mode)
  ))
#+end_src
è®¾ç½®æ‰“å­—æœºæ¨¡å¼
#+begin_src emacs-lisp
(define-globalized-minor-mode typewriter-mode centered-cursor-mode
  (lambda ()
    (when (not (memq major-mode
                     (list 'Info-mode 'term-mode 'eshell-mode 'shell-mode 'erc-mode)))
      (require 'centered-cursor-mode)
      (centered-cursor-mode))))
#+end_src
è®¾ç½® tab-out
#+begin_src emacs-lisp
(use-package tab-jump-out
  :after-call doom-first-input-hook
  :custom
  (yas-fallback-behavior '(apply tab-jump-out 1)))
#+end_src
ç®€åŒ–æç¤ºï¼Œç”¨ y/n ä»£æ›¿ yes/no ï¼Œåˆ«å†æé†’æˆ‘ "Really kill emacs?" äº†ã€‚

ä» manateelazycat å¤§ä½¬çš„é…ç½®ä¸ŠæŠ„çš„ï¼Œä½†æˆ‘å¹¶ä¸çŸ¥é“æ–°è¯­æ³• advice-add æ€ä¹ˆç”¨ã€‚
#+begin_src emacs-lisp
(fset 'yes-or-no-p 'y-or-n-p)
;; (advice-add 'save-buffer-kill-emacs :around (lambda (fn &rest)
;;   (require 'noflet)
;;   (setq confirm-kill-emacs nil)
;;   (noflet (process-list) ad-do-it)))
(defadvice save-buffers-kill-emacs (around no-query-kill-emacs activate)
  "Prevent annoying \"Active processes exist\" query when you quit Emacs."
  (require 'noflet)
  (setq confirm-kill-emacs nil)
  (noflet (process-list) ad-do-it))
#+end_src
è‡ªå®šä¹‰Variableså’ŒFaces

æˆ‘ä¸çŸ¥é“è¿™æ˜¯å¹²å˜›ç”¨çš„ï¼Œä½†å®ƒæ—¢ç„¶åœ¨è¿™é‡Œâ€¦â€¦
#+begin_src emacs-lisp
(custom-set-variables
;; custom-set-variables was added by Custom.
;; If you edit it by hand, you could mess it up, so be careful.
;; Your init file should contain only one such instance.
;; If there is more than one, they won't work right.
 )
(custom-set-faces)
;; custom-set-faces was added by Custom.
;; If you edit it by hand, you could mess it up, so be careful.
;; Your init file should contain only one such instance.
;; If there is more than one, they won't work right.
#+end_src
* packages.el
Emacs æ ¸å¿ƒæ‰€éœ€çš„æ’ä»¶
#+begin_src emacs-lisp :tangle packages.el
;; -*- no-byte-compile: t; -*-
;;; packages.el
(unpin! t)
;;(package! vc-msg)
;;(package! power-mode)
;;(package! imenu-list)
(package! org-modern)
(package! noflet)
(package! transient-posframe)
(package! clipetty)
(package! sudoku)
(package! tab-jump-out)
(package! centered-cursor-mode)
(package! catppuccin-theme)
(package! nova  :recipe(:host github :repo "anonimitoraf/nova" :files ("*") :build (:not compile)))
;;(package! cal-china-x)
;;(package! railgun :recipe(:host github :repo "gynamics/railgun.el"))
#+end_src
* ä¸ªäººæ¨¡å—
** meow
Evilå®åœ¨æ˜¯å¤ªé‡äº†ï¼Œä½†æˆ‘åˆæ— æ³•é€‚åº”EmacsåŸç”ŸæŒ‰é”®ï¼Œå°±ä½¿ç”¨è½»é‡çº§çš„Meowäº†

=M-x meow-tutor= ä»¥å­¦ä¹ MeowæŒ‰é”®ï¼ˆç±»ä¼¼äºvim-tutorï¼‰
#+begin_src emacs-lisp :tangle modules/editor/meow/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/editor/meow/packages.el

(package! meow)
#+end_src
#+begin_src emacs-lisp :tangle modules/editor/meow/config.el
;;; modules/editor/meow/config.el -*- lexical-binding: t; -*-
(defun meow/setup ()
  (setq meow-use-cursor-position-hack t
        meow-use-clipboard t
        meow-use-enhanced-selection-effect t)
  (bind-keys :map meow-normal-state-keymap
             ("0" . meow-expand-0)
             ("1" . meow-expand-1)
             ("2" . meow-expand-2)
             ("3" . meow-expand-3)
             ("4" . meow-expand-4)
             ("5" . meow-expand-5)
             ("6" . meow-expand-6)
             ("7" . meow-expand-7)
             ("8" . meow-expand-8)
             ("9" . meow-expand-9)
             ("-" . negative-argument)
             (";" . meow-reverse)
             ("," . meow-inner-of-thing)
             ("." . meow-bounds-of-thing)
             ("'" . repeat)))
(defun meow-append-this-line ()
  (interactive)
  (move-end-of-line 1)
  (meow-insert))
(defun meow-insert-this-line ()
  (interactive)
  (move-beginning-of-line 1)
  (meow-insert))
(defun meow/setup-qwerty ()
  (setq meow-cheatsheet-layout meow-cheatsheet-layout-qwerty)
  (meow/setup)
  (bind-keys :map meow-normal-state-keymap
   ("[" . meow-beginning-of-thing)
   ("]" . meow-end-of-thing)
   ("a" . meow-append)
   ("o" . meow-open-below)
   ("A" . meow-append-this-line)
   ("b" . meow-back-word)
   ("B" . meow-back-symbol)
   ("c" . meow-change)
   ("e" . meow-next-word)
   ("E" . meow-next-symbol)
   ("f" . meow-find)
   ("g" . meow-cancel-selection)
   ("G" . meow-grab)
   ("h" . meow-left)
   ("H" . meow-left-expand)
   ("i" . meow-insert)
   ("I" . meow-insert-this-line)
   ("O" . meow-open-above)
   ("j" . meow-next)
   ("J" . meow-next-expand)
   ("k" . meow-prev)
   ("K" . meow-prev-expand)
   ("l" . meow-right)
   ("L" . meow-right-expand)
   ("v" . meow-visit)
   ("m" . meow-join)
   ("n" . meow-search)
   ("%" . meow-block)
   ("p" . meow-yank)
   ("q" . meow-quit)
   ("Q" . meow-goto-line)
   ("r" . meow-replace)
   ("R" . meow-swap-grab)
   ("d" . meow-kill)
   ("t" . meow-till)
   ("u" . meow-undo)
   ("U" . meow-undo-in-selection)
   ("/" . meow-comment)
   ("w" . meow-mark-word)
   ("W" . meow-mark-symbol)
   ("x" . meow-line)
   ("X" . meow-goto-line)
   ("y" . meow-save)
   ("Y" . meow-sync-grab)
   ("z" . meow-pop-selection)))

(use-package meow
  :hook (doom-after-modules-config . meow-global-mode)
  :demand t
  :config
  (meow/setup-qwerty)
  (bind-keys :map meow-keymap ([remap describe-key] . helpful-key))
  (meow-define-keys
   'normal
   '("s" . avy-goto-char)
   '("F" . avy-goto-char-2)))
#+end_src
** baosize
*** awesome-tray
æ‡’çŒ«çš„åº•éƒ¨çŠ¶æ€æ ï¼Œä»£æ›¿ =modeline= ï¼Œä¸ =sort-tab= ä¸€æ ·ä»¥æœ€å°çª—å£ç©ºé—´å ç”¨ä¸ºç†å¿µã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/awesome-tray/config.el
:END:
ç»™é»˜è®¤æ¨¡å—åŠ å›¾æ ‡ã€‚
#+begin_src emacs-lisp
;;; modules/baosize/awesome-tray/config.el -*- lexical-binding: t; -*-
#+end_src
æ˜¾ç¤º =lsp-bridge= çŠ¶æ€å’Œè¯Šæ–­æ•°ç›®
#+begin_src emacs-lisp
(defun awesome-tray-lsp-module () (if (not (equal lsp-bridge-mode nil))
  (if (not (equal lsp-bridge-diagnostic-count nil))
      (concat "ï„µ " (int-to-string lsp-bridge-diagnostic-count))
      "ïš ")
  ""))
(defface awesome-tray-module-lsp-face
  '((((background light)) :inherit awesome-tray-orange-face)
    (t :inherit awesome-tray-orange-face))
  "Lsp-bridge face."
  :group 'awesome-tray)
#+end_src
æ˜¾ç¤ºå½“å‰å…‰æ ‡æ‰€åœ¨å‡½æ•°
#+begin_src emacs-lisp
(defun awesome-tray-mybelong-module ()
    (let ((origin (if (modulep 'treesit)
      (let ((current-seconds (awesome-tray-current-seconds)))
        (if (or (not (eq (current-buffer) awesome-tray-belong-last-buffer))
                (> (- current-seconds awesome-tray-belong-last-time) awesome-tray-belong-update-duration))
            (progn
              (setq awesome-tray-belong-last-time current-seconds)
              (setq awesome-tray-belong-last-buffer (current-buffer))
              (awesome-tray-update-belong-cache))
          awesome-tray-belong-cache))"")))
        (if (equal origin "") "" (concat "ó°¡± " origin))))
#+end_src
æ˜¾ç¤º =meow= çŠ¶æ€
#+begin_src emacs-lisp
(defun awesome-tray-mymeow-module ()
  (let ((origin (with-demoted-errors
      ""
    (if (and (modulep 'meow) awesome-tray-meow-show-mode)
        meow--indicator
      ""))))
    (concat "ó°„›" origin)))
#+end_src
æ˜¾ç¤º =Git= çŠ¶æ€
#+begin_src emacs-lisp
(defun awesome-tray-mygit-module ()
  (let ((origin (if (executable-find "git")
      (progn
        (if (not (string= (buffer-file-name) awesome-tray-git-buffer-filename))
            (awesome-tray-git-command-update-cache))
        awesome-tray-git-command-cache)
    "")))
    (if (equal origin "") "" (concat "î™ " origin))))
#+end_src
æ·»åŠ ä¸Šè¿°æ¨¡å—åˆ° =awesome-tray= æ ¸å¿ƒå¹¶æŒ‚ä¸Šå¯åŠ¨æ—¶çš„é’©å­
#+begin_src emacs-lisp
(use-package 'awesome-tray
:hook (doom-after-init . awesome-tray-mode)
:custom
(awesome-tray-buffer-read-only-style "ó°Œ¾ ")
(awesome-tray-mode-line-active-color "#4ea9e6")
(awesome-tray-belong-update-duration 1)
(awesome-tray-active-modules '("winum"
                               "lsp"
                               "input-method"
                               "mybelong"
                               "mymeow"
                               "file-path"
                               "buffer-read-only"
                               "mygit"
                               "ó°¥”"
                               "date"
                               "clock"))
(awesome-tray-input-method-local-style "ã¢")
:config
(add-to-list 'awesome-tray-module-alist
       '("winum" . (awesome-tray-winum-module awesome-tray-winum-module-face)))
(add-to-list 'awesome-tray-module-alist
       '("mybelong" . (awesome-tray-mybelong-module awesome-tray-module-belong-face)))
(add-to-list 'awesome-tray-module-alist
       '("mymeow" . (awesome-tray-mymeow-module awesome-tray-module-meow-face)))
(add-to-list 'awesome-tray-module-alist
       '("mygit" . (awesome-tray-mygit-module awesome-tray-module-git-face)))
(add-to-list 'awesome-tray-module-alist
       '("lsp" . (awesome-tray-lsp-module awesome-tray-module-lsp-face))))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/awesome-tray/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/awesome-tray/packages.el
(package! awesome-tray
  :recipe (:host github :repo "manateelazycat/awesome-tray"))
#+end_src
*** blink-search
æ‡’çŒ«çš„å¤šæºæœç´¢ï¼Œæ®è¯´å¾ˆå¿«å°±å¯ä»¥å–ä»£ =vertico+consult= å…¨å®¶æ¡¶äº†ã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/blink-search/config.el
:END:
å£°æ˜
#+begin_src emacs-lisp
;;; modules/baosize/blink-search/config.el -*- lexical-binding: t; -*-
(use-package blink-search
#+end_src
ç”±äºæŸç§åŸå› ï¼Œ =blink-search= ä¸èƒ½æ­£å¸¸åŠ è½½ï¼Œéœ€è¦æŒ‡å®š =load-path= ã€‚

æ³¨æ„å¦‚æœæŠŠ Doom å®‰è£…åœ¨ =~/.config/emacs= éœ€è¦æ›´æ”¹ä½ç½®ã€‚
#+begin_src emacs-lisp
:load-path "~/.config/doomemacs/.local/straight/repos/blink-search/"
#+end_src
ç»‘å®šé”®ä½ã€‚
#+begin_src emacs-lisp
:bind (("C-c b s" . blink-search))
#+end_src
è¿›å…¥ =blink-search= æ—¶è‚¯å®šå¾—æ˜¯ =meow-insert-mode= å•Š
#+begin_src emacs-lisp
:config (add-hook 'blink-search-mode-hook #'meow-insert))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/blink-search/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/blink-search/packages.el
(package! blink-search
  :recipe (:host github :repo "manateelazycat/blink-search"))
#+end_src
*** color-rg
æ‡’çŒ«çš„æœç´¢æ’ä»¶ï¼Œç±»ä¼¼äº =el-search= ï¼Œä½†æ˜¯æ›´æ˜“ç”¨ï¼Œæ›´å¿«
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/color-rg/config.el
;;; modules/baosize/color-rg/config.el -*- lexical-binding: t; -*-
(use-package color-rg
  :bind
  (("C-c r i" . color-rg-search-input)
   ("C-c r s" . color-rg-search-symbol)
   ("C-c r I" . color-rg-search-input-in-project)
   ("C-c r S" . color-rg-search-symbol-in-project)
   ("C-c r b" . color-rg-search-input-in-current-file)
   ("C-c r j" . color-rg-search-symbol-in-current-file)
   ("C-c r t" . color-rg-search-project-with-type)
   ("C-c r x" . color-rg-search-symbol-with-type)))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/color-rg/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/color-rg/packages.el
(package! color-rg
  :recipe (:host github :repo "manateelazycat/color-rg"))
#+end_src
*** EAF
=Emacs Application Frames= ï¼Œç”±æ‡’çŒ«å¼€å‘çš„ä½¿ "Live in Emacs" æˆä¸ºç°å®çš„è¶…çº§åº”ç”¨æ¡†æ¶ï¼Œä¹Ÿæ˜¯æœ¬é…ç½®çš„æ ¸å¿ƒä¹‹ä¸€ã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/eaf/config.el
:END:
#+begin_src emacs-lisp
;;; modules/baosize/eaf/config.el -*- lexical-binding: t; -*-
#+end_src
åˆ¤æ–­æ˜¯å¦æ˜¯ç»ˆç«¯ï¼Œæ˜¯åˆ™ä¸åŠ è½½ EAF ä»¥èŠ‚çœå¯åŠ¨æ—¶é—´
#+begin_src emacs-lisp
(when (and (display-graphic-p) (not (daemonp)))
#+end_src
å¯åŠ¨ EAF æ¡†æ¶
#+begin_src emacs-lisp
(use-package eaf
  :after-call doom-after-init-hook
  :hook
  (eaf-mode . doom-modeline-mode)
  :init
  (bind-keys ("C-c ee" . eaf-open-this-buffer)
             ("C-c ef" . eaf-open)
             ("C-c em" . eaf-open-bookmark)))
#+end_src
å¯åŠ¨æµè§ˆå™¨ï¼ˆè¿™ä¹ˆå¤§ä¸€ä¸ªåŒ…ï¼Œè‚¯å®šå¾—æ‡’åŠ è½½ï¼‰
#+begin_src emacs-lisp
(use-package eaf-browser
#+end_src
è‡ªå®šä¹‰å¤–è§‚
#+begin_src emacs-lisp
  :custom
  ;;eaf-browser-dark-mode t
  (eaf-browser-default-search-engine "bing")
  (eaf-webengine-font-family "JetBrainsMono Nerd Font")
  (eaf-webengine-fixed-font-family "JetBrainsMono Nerd Font")
  (eaf-webengine-serif-font-family "JetBrainsMono Nerd Font")
  (eaf-webengine-font-size 18)
  (eaf-webengine-fixed-font-size 18)
#+end_src
è‡ªå®šä¹‰æœç´¢å¼•æ“
#+begin_src emacs-lisp
  (eaf-browser-search-engines '(("bing" . "https://bing.com/search?q=%s"))
                               ("baidu" . "https://www.baidu.com/search?ie=utf-8&q=%s")
                               ("google" . "http://www.google.com/search?ie=utf-8&q=%s")
                               ("duckduckgo" . "https://duckduckgo.com/?q=%s"))
#+end_src
é…ç½®ä»£ç†
#+begin_src emacs-lisp
  (eaf-proxy-host "127.0.0.1")
  (eaf-proxy-port "7897")
  (eaf-proxy-type "http")
#+end_src
åŒæ­¥Chromium
#+begin_src emacs-lisp
  (eaf-browser-auto-import-chrome-cookies nil)
  (eaf-browser-chrome-browser-name "Chromium")
  (eaf-chrome-bookmark-file "~/.config/chromium/Default/Bookmarks")
  (eaf-browser-chrome-history-file "~/.config/chromium/Default/History")
  (eaf-browser-enable-autofill t)
  (eaf-browser-enable-adblocker t)
#+end_src
è®¾ç½®ä¸ºé»˜è®¤æµè§ˆå™¨
#+begin_src emacs-lisp
  (browse-url-browser-function #'eaf-open-browser)
#+end_src
å…¼å®¹ meow, ä»£ç ä¸»è¦æ¥è‡ª eaf çš„ extensions/eaf-evil.el
#+begin_src emacs-lisp
  :config
  (defcustom eaf-meow-leader-key "M-m"
    "Leader key trigger" )

  (defcustom eaf-meow-leader-keymap #'meow-keypad
    "Leader key bind"
    :type 'keymap)

  ;;;###autoload
  (defun eaf-enable-meow-intergration ()
    "EAF meow intergration."
    (interactive)

    (add-hook 'meow-normal-mode-hook
              (lambda ()
                (when (derived-mode-p 'eaf-mode)
                  (define-key eaf-mode-map (kbd eaf-meow-leader-key) eaf-meow-leader-keymap)
                  (setq emulation-mode-map-alists
                      (delq 'meow-keypad-mode-map emulation-mode-map-alists))
                  (setq emulation-mode-map-alists
                      (delq 'meow-normal-mode-map emulation-mode-map-alists))
                  (setq emulation-mode-map-alists
                      (delq 'meow-motion-mode-map emulation-mode-map-alists))
                  (setq emulation-mode-map-alists
                      (delq 'meow-beacon-mode-map emulation-mode-map-alists))
                  (setq emulation-mode-map-alists
                      (delq 'meow-insert-mode-map emulation-mode-map-alists))
                  ;; (setq emulation-mode-map-alists
                  ;;       (delq 'evil-mode-map-alist emulation-mode-map-alists))
                  )))
    (add-hook 'eaf-edit-mode-hook #'meow-insert-mode)

    ;; (add-to-list 'evil-insert-state-modes 'eaf-edit-mode) ; don't know how to adds eaf-edit-mode into meow-insert-mode

    (eaf-bind-key clear_focus "<escape>"  eaf-browser-keybinding))

  (with-eval-after-load "eaf"
    (eaf-enable-meow-intergration))
#+end_src
æ´›è°·å°æ’ä»¶ğŸ˜…
#+begin_src emacs-lisp
  (defun luogu-open-problem (pid)
    "æ‰“å¼€é¢˜ç›®"
    (interactive "M[Luogu] ProblemID: ")
    (eaf-open-browser (concat "https://www.luogu.com.cn/problem/" pid)))
  (defun luogu-open-discuss (did)
    "æ‰“å¼€è®¨è®º"
    (interactive "M[Luogu] DiscussID: ")
    (eaf-open-browser (concat "https://www.luogu.com.cn/discuss/" did)))
  (defun luogu-open-training (tid)
    "æ‰“å¼€é¢˜å•"
    (interactive "M[Luogu] TrainingID: ")
    (eaf-open-browser (concat "https://www.luogu.com.cn/training/" tid)))
  (defun luogu-open-user-home (uid)
    "æ‰“å¼€ç”¨æˆ·ä¸»é¡µ"
    (interactive "M[Luogu] UserID: ")
    (eaf-open-browser (concat "https://www.luogu.com.cn/user/" uid)))
  (defun luogu-open-contest (cid)
    "æ‰“å¼€æ¯”èµ›"
    (interactive "M[Luogu] ContestID: ")
    (eaf-open-browser (concat "https://www.luogu.com.cn/contest/" cid)))
  (defun luogu-open-team (teamid)
    "æ‰“å¼€å›¢é˜Ÿ"
    (interactive "M[Luogu] TeamID: ")
    (eaf-open-browser (concat "https://www.luogu.com.cn/team/" teamid)))
#+end_src
æµè§ˆå™¨é”®ç»‘å®š
#+begin_src emacs-lisp
  :bind (("C-c e b" . eaf-open-browser)
         ("C-c e h" . eaf-open-browser-with-history)
         ("C-c e B" . eaf-open-browser-other-window)
         ("C-c e s" . eaf-open-browser-same-window)
         ("C-c elc" . luogu-open-contest)
         ("C-c eld" . luogu-open-discuss)
         ("C-c ele" . luogu-open-team)
         ("C-c elp" . luogu-open-problem)
         ("C-c elt" . luogu-open-training)
         ("C-c elu" . luogu-open-user-home)))
#+end_src
å¯åŠ¨ç»ˆç«¯
#+begin_src emacs-lisp
(use-package eaf-pyqterminal
#+end_src
è®¾ç½®å¤–è§‚
#+begin_src emacs-lisp
  :custom
  (eaf-pyqterminal-font-size 18)
  (eaf-pyqterminal-font-family "JetBrainsMono Nerd Font")
#+end_src
ç»ˆç«¯é”®ç»‘å®š
#+begin_src emacs-lisp
  :bind (("C-c e t" . eaf-open-pyqterminal)
         ("C-c e i" . eaf-open-ipython)))
#+end_src
æ–‡ä»¶ç®¡ç†å™¨é”®ç»‘å®š
#+begin_src emacs-lisp
(use-package eaf-file-manager
 :bind (("C-c e /" . eaf-open-in-file-manager)))
#+end_src
å¯åŠ¨é¢„è§ˆ
#+begin_src emacs-lisp
(use-package eaf-org-previewer
  :after-call org-mode)
(use-package eaf-markdown-previewer
  :after-call (markdown-mode gfm-mode))
#+end_src
ç›®å‰å­˜åœ¨æ²¡ä¿®å¥½çš„ bug çš„ä¸€äº›åŒ…
#+begin_src emacs-lisp
(with-eval-after-load 'eaf
  (use-package eaf-pdf-viewer))
;; (use-package eaf-git :bind (("C-c e g" . eaf-open-git)))
)
#+end_src
**** packages.el
:PROPERTIES:
:header-args: :tangle modules/baosize/eaf/packages.el
:END:
#+begin_src emacs-lisp
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/eaf/packages.el
#+end_src
eaf éœ€è¦ç¼–è¯‘ç›¸å…³ä¾èµ–
#+begin_src emacs-lisp
(defun +eaf-install-deps-for-app(app-dir)
  "Install deps from dependencies.json."
  (let* ((deps-dict (with-temp-buffer
                      (insert-file-contents
                       (expand-file-name "dependencies.json" app-dir))
                      (json-parse-string (buffer-string))))
         (pip-deps (gethash (if IS-LINUX "linux" "darwin")
                            (or (gethash "pip" deps-dict)
                                (make-hash-table))))
         (vue-install (gethash "vue_install" deps-dict))
         (npm-install (gethash "npm_install" deps-dict))
         (npm-rebuild (gethash "npm_rebuild" deps-dict)))
    (when pip-deps
      (dolist (pkg (append pip-deps nil))
        (message "%s" (shell-command-to-string (format "pip install %s" pkg)))))
    (when vue-install
      (let ((default-directory app-dir))
        (message "%s" (shell-command-to-string "npm install"))
        (message "%s" (shell-command-to-string "npm run build"))))
    (when npm-install
      (let ((default-directory app-dir))
        (message "%s" (shell-command-to-string "npm install"))))
    (when npm-rebuild
      (let ((default-directory app-dir))
        (message "%s" (shell-command-to-string "npm rebuild"))))))
#+end_src
å®‰è£… eaf æ ¸å¿ƒ
#+begin_src emacs-lisp
(package! eaf
  :recipe (:host github :repo "emacs-eaf/emacs-application-framework"
           :files ("*")
           :post-build
           (shell-command "python install-eaf.py --install-core-deps")))
#+end_src
å®‰è£…æµè§ˆå™¨
#+begin_src emacs-lisp
(package! eaf-browser
  :recipe (:host github :repo "emacs-eaf/eaf-browser"
           :files ("*")
           :post-build
           (+eaf-install-deps-for-app
            (concat straight-base-dir "/straight/" straight-build-dir "/eaf-browser"))))
#+end_src
å®‰è£…ç»ˆç«¯
#+begin_src emacs-lisp
(package! eaf-pyqterminal
  :recipe (:host github :repo "mumu-lhl/eaf-pyqterminal"
           :files ("*")
           :post-build
           (+eaf-install-deps-for-app
            (concat straight-base-dir "/straight/" straight-build-dir "/eaf-pyqterminal"))))
#+end_src
å®‰è£…æ–‡ä»¶ç®¡ç†å™¨
#+begin_src emacs-lisp
(package! eaf-file-manager
  :recipe (:host github :repo "emacs-eaf/eaf-file-manager"
           :files ("*")
           :post-build
           (+eaf-install-deps-for-app
            (concat straight-base-dir "/straight/" straight-build-dir "/eaf-file-manager"))))
#+end_src
å®‰è£…é¢„è§ˆæ’ä»¶
#+begin_src emacs-lisp
(package! eaf-org-previewer
 :recipe (:host github :repo "emacs-eaf/eaf-org-previewer"
          :files ("*")
          :post-build
          (+eaf-install-deps-for-app
           (concat straight-base-dir "/straight/" straight-build-dir "/eaf-org-previewer"))))
(package! eaf-markdown-previewer
 :recipe (:host github :repo "emacs-eaf/eaf-markdown-previewer"
          :files ("*")
          :post-build
          (+eaf-install-deps-for-app
           (concat straight-base-dir "/straight/" straight-build-dir "/eaf-markdown-previewer"))))
#+end_src
ä¸€äº›æœ‰ bug çš„åŒ…
#+begin_src emacs-lisp
(package! eaf-pdf-viewer
 :recipe (:host github :repo "emacs-eaf/eaf-pdf-viewer"
          :files ("*")
          :post-build
          (+eaf-install-deps-for-app
           (concat straight-base-dir "/straight/" straight-build-dir "/eaf-pdf-viewer"))))
;;(package! eaf-git
;;  :recipe (:host github :repo "emacs-eaf/eaf-git"
;;           :files ("*")
;;           :post-build
;;           (+eaf-install-deps-for-app
;;            (concat straight-base-dir "/straight/" straight-build-dir "/eaf-git"))))
#+end_src
*** holo-layer
æ‡’çŒ«å¼€å‘çš„å„ç§ç‰¹æ•ˆï¼Œæ²¡æœ‰å‡† =Linux= ç¯å¢ƒæ‰€ä»¥ç›®å‰å”¯ä¸€æˆåŠŸçš„ç¯å¢ƒæ˜¯ =wslg+sway= ã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/holo-layer/config.el
:END:
#+begin_src emacs-lisp
;;; modules/baosize/holo-layer/config.el -*- lexical-binding: t; -*-
(when (and (display-graphic-p) (not (daemonp)))
#+end_src
è§£å†³æ‰¾ä¸åˆ°å‡½æ•°çš„ bug
#+begin_src emacs-lisp
(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/blink-search/backend/")
#+end_src
å¯åŠ¨ =holo-layer=
#+begin_src emacs-lisp
(use-package holo-layer
  :custom
  (holo-layer-enable-cursor-animation t)
  (holo-layer-enable-type-animation t)
  (holo-layer-cursor-animation-type "jelly easing")
  (holo-layer-cursor-animation-interval 10)
  (holo-layer-cursor-animation-duration 80)
  (holo-layer-enable-window-border t)
  ;; (holo-layer-enable-place-info t)
  (holo-layer-enable-window-number-background t)
  ;; (holo-layer-hide-mode-line t)
  (holo-layer-enable-indent-rainbow t)
  ;; (holo-layer-indent-colors '())
  (holo-layer-cursor-color nil)
  (holo-layer-cursor-alpha 255)
  (holo-layer-type-animation-style "supernova")
  (holo-layer-sort-tab-ui t)
  :hook
  (doom-after-init . holo-layer-enable)))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/holo-layer/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/holo-layer/packages.el
(package! holo-layer
  :recipe (:host github :repo "manateelazycat/holo-layer"
    :files ("*")
    :build (:not compile)))
#+end_src
*** sort-tab
æ‡’çŒ«çš„æ ‡ç­¾æ ï¼Œå¯ç”¨ =holo-layer= å³å¯æ˜¾ç¤ºå›¾æ ‡
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/sort-tab/config.el
;;; modules/baosize/sort-tab/config.el -*- lexical-binding: t; -*-
(use-package sort-tab
  :hook
  (doom-after-init . sort-tab-mode)
  :init
  (bind-keys ("C-c b]" . sort-tab-select-next-tab)
        ("C-c bn" . sort-tab-select-next-tab)
        ("C-<tab>" . sort-tab-select-next-tab)
        ("C-<iso-lefttab>" . sort-tab-select-prev-tab)
        ("C-c b[" . sort-tab-select-prev-tab)
        ("C-c bp" . sort-tab-select-prev-tab)
        ("C-c bl" . sort-tab-select-last-tab)
        ("C-c bK" . sort-tab-close-all-tabs)
        ("C-c bO" . sort-tab-close-other-tabs)
        ("C-c bd" . sort-tab-close-current-tab)
        ("C-c bk" . sort-tab-close-current-tab)))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/sort-tab/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/sort-tab/packages.el
(package! sort-tab
  :recipe (:host github :repo "manateelazycat/sort-tab"))
#+end_src
*** popweb
æ‡’çŒ«å¼€å‘çš„å¤šåª’ä½“å¼¹çª—ï¼Œç›®å‰æ”¯æŒé¢„è§ˆ =LaTeX= ï¼Œå¼¹å‡ºå„ç§ç¿»è¯‘ã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/popweb/config.el
:END:
æŒ‡å®š =load-path= 
#+begin_src emacs-lisp
;;; modules/baosize/popweb/config.el -*- lexical-binding: t; -*-
(when (and (display-graphic-p) (not (daemonp)))
;;(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/popweb/extension/org-roam")
(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/popweb/extension/latex")
(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/popweb/extension/dict")
;;(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/popweb/extension/color-picker")
;;(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/popweb/extension/anki-review")
(add-to-list 'load-path "~/.config/doomemacs/.local/straight/repos/popweb/extension/url-preview")
#+end_src
åŠ è½½å¯¹åº”åº”ç”¨
#+begin_src emacs-lisp
(use-package popweb
  :bind
  ("C-c py" . popweb-dict-youdao-input)
  ("C-c pd" . popweb-dict-dictcn-input)
  ("C-c pb" . popweb-dict-bing-input)
  ("C-c pu" . popweb-url-input)
  :config
  (require 'popweb-url)
;;(use-package color-picker)
  (require 'popweb-dict))
(add-hook 'latex-mode-hook #'(lambda () (require 'popweb) (require 'popweb-latex) (popweb-latex-mode))))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/popweb/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/popweb/packages.el
(package! popweb
  :recipe (:host github
           :repo "manateelazycat/popweb"
           :files ("*")))
#+end_src
*** chinese
è®¾ç½® emacs-rime è¾“å…¥æ³•ï¼Œ Rime åœ¨ =~/.local/share/emacs-rime= æ–‡ä»¶å¤¹ä¸­è®¾ç½®ã€‚ 
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/chinese/config.el
:END:
#+begin_src emacs-lisp
;;; modules/baosize/chinese/config.el -*- lexical-binding: t; -*-
#+end_src
ä½¿ç”¨ =ace-pinyin= ä»¥æ”¯æŒ =avy= è·³è½¬åˆ°ä¸­æ–‡

ä½¿ç”¨ =pinyin-lib= ä»¥æ”¯æŒ =consult= æœç´¢ä¸­æ–‡
#+begin_src emacs-lisp
(use-package ace-pinyin
  :after avy
  :init (setq ace-pinyin-use-avy t)
  :config (ace-pinyin-global-mode t))
(use-package pinyinlib
  :commands (pinyinlib-build-regexp-string)
  :init
  (defun orderless-regexp-pinyin (str)
    (setf (car str) (pinyinlib-build-regexp-string (car str)))
    str)
  (advice-add 'orderless-regexp :filter-args #'orderless-regexp-pinyin))
#+end_src
ç¦ç”¨ç³»ç»Ÿè¾“å…¥æ³•
=Fcitx5= ä»€ä¹ˆçš„åœ¨ =Emacs= ä¸Šçš„ä½“éªŒå¾ˆä¸å¥½ã€‚
#+begin_src emacs-lisp
; disable gtk im modules for emacs-pgtk, add "Emacs*UseXIM: false" to ~/.Xresources to disable xim
(when (boundp 'pgtk-use-im-context-on-new-connection)
  (setq pgtk-use-im-context-on-new-connection nil))
#+end_src
=use-package= å£°æ˜
#+begin_src emacs-lisp
(use-package rime
#+end_src
é”®ç»‘å®š
#+begin_src emacs-lisp 
  :bind
  (:map rime-mode-map ("C-`" . #'rime-send-keybinding))
#+end_src
è‡ªåŠ¨åˆ‡æ¢è¾“å…¥æ³•
#+begin_src emacs-lisp
  :custom
  (rime-disable-predicates
      '(rime-predicate-evil-mode-p
           meow-normal-mode-p
           meow-keypad-mode-p
           meow-motion-mode-p
           rime-predicate-hydra-p
           rime-predicate-prog-in-code-p
           rime-predicate-space-after-cc-p
           ;; rime-predicate-org-in-src-block-p
           rime-predicate-org-latex-mode-p
           rime-predicate-punctuation-after-space-cc-p
           rime-predicate-punctuation-after-ascii-p
           rime-predicate-punctuation-line-begin-p
           ;; rime-predicate-space-after-ascii-p
           ;; rime-predicate-space-after-cc-p
           rime-predicate-after-ascii-char-p))
#+end_src
Rime æœ¬èº«ç›¸å…³è®¾ç½®
#+begin_src emacs-lisp
  ;; (rime-share-data-dir
  ;;  (cl-some (lambda (dir)
  ;;             (let ((abs-dir (expand-file-name dir)))
  ;;               (when (file-directory-p abs-dir)
  ;;                 abs-dir)))
  ;;           '("/usr/share/rime-data"
  ;;             "/usr/share/local"
  ;;             "/usr/share")))
  (rime-user-data-dir (expand-file-name "~/.local/share/emacs-rime"))
  (rime-show-candidate 'posframe)
  (rime-posframe-style 'vertical)
#+end_src
è®¾ç½®é»˜è®¤è¾“å…¥æ³•
#+begin_src emacs-lisp
(default-input-method "rime")
#+end_src
=Org-mode= è‡ªå¯åŠ¨
#+begin_src emacs-lisp
 :config
 (add-hook 'org-mode-hook (lambda () (activate-input-method default-input-method)))
#+end_src
é˜²æ­¢å µå¡ã€å†»ç»“ =Emacs=
#+begin_src emacs-lisp
(add-hook 'kill-emacs-hook (lambda () (ignore-errors (rime-lib-finalize)))))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/chinese/packages.el 
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/chinese/packages.el


(package! rime)
(package! ace-pinyin)
(package! pinyinlib)
(when (modulep! :editor evil) (package! evil-pinyin))
#+end_src
*** corfu-english-helper
ç”¨ corfu è¾“å…¥è‹±æ–‡å•è¯ï¼ŒåŸæœ¬ä½¿ç”¨çš„å®ç°æ˜¯ manateelazycat çš„ corfu-english-helper, ä½†æ˜¯ç§‰æ‰¿ç€å°½é‡ç¼©å‡åŒ…æ•°çš„ç†å¿µï¼Œä½¿ç”¨ cape-dict ä»£æ›¿ã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/corfu-english-helper/config.el
:END:
#+begin_src emacs-lisp
;;; modules/baosize/corfu-english-helper/config.el -*- lexical-binding: t; -*-
(with-eval-after-load 'corfu
(setq cape-dict-file
      (if (file-exists-p "/usr/share/dict/words")
          "/usr/share/dict/words"
        "/usr/share/dict/cracklib-small"))
(defvar-local cape-dict-mode--enabled nil
  "Internal flag whether `cape-dict-mode` is enabled in this buffer.")

(defun cape-dict-mode--toggle ()
  "Toggle `cape-dict` in `completion-at-point-functions`."
  (if cape-dict-mode--enabled
      (setq completion-at-point-functions
            (remove #'cape-dict completion-at-point-functions))
    (let ((rest (cdr completion-at-point-functions)))
      (setq completion-at-point-functions
            (cons (car completion-at-point-functions)
                  (cons #'cape-dict rest)))))
  (setq cape-dict-mode--enabled (not cape-dict-mode--enabled)))

(define-minor-mode cape-dict-mode
  "Toggle inserting `cape-dict` after the first CAPF."
  :init-value nil
  :lighter " CAPE-Dict"
  (cape-dict-mode--toggle))
(add-hook 'org-mode-hook #'cape-dict-mode))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/corfu-english-helper/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/corfu-english-helper/packages.el
;;(package! corfu-english-helper :recipe(:host github :repo "manateelazycat/corfu-english-helper" :files ("*")))
#+end_src
*** treesit-context
:PROPERTIES:
:header-args: :tangle modules/baosize/treesit-context/autoload.el
:END:
ç±»ä¼¼äº [[https://github.com/nvim-treesitter/nvim-treesitter-context][Nvim Treesitter Context]] çš„æ˜¾ç¤ºä»£ç å±‚çº§çš„æ’ä»¶ï¼Œä»£ç é«˜åº¦å€Ÿé‰´[[https://emacs-china.org/t/treesit-context-tree-sitter-topsy/25162][Emacs China]]

è¯•ç€æ•´ç†ä¸€ä¸‹ï¼Œå½“å­¦ä¹  =Emacs Lisp= äº†ã€‚

å®šä¹‰åŸºæœ¬å˜é‡ï¼Œä»¥åŠæ–‡ä»¶å¤´
#+begin_src emacs-lisp
;;; modules/baosize/treesit-context/autoload.el -*- lexical-binding: t; -*-
;;;###autoload
(defgroup treesit-context nil
  "Show the context of the currently visible buffer contents."
  :group 'treesit)
(defvar treesit-context--buffer (generate-new-buffer "*treesit-context-posframe-buffer*")
  "Buffer used to display the context.")
(defvar treesit-context--list nil
  "List used to store the context needs showing.")
(defvar treesit-context--timer nil
  "Timer for updating the context.")
#+end_src
å£°æ˜æ˜¾ç¤ºå‡½æ•°ï¼ˆ =Emacs Lisp= åŠ è½½çš„æ—¶å€™ä¼šå…ˆè¯»å–æ‰€æœ‰æºç ï¼Œç„¶ååœ¨æºç ä¸­æŸ¥æ‰¾å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ— éœ€è®¡è¾ƒå£°æ˜é¡ºåºï¼Œä¸åƒæŸäº› C è¯­è¨€ï¼‰
#+begin_src emacs-lisp
;;;###autoload
(defun treesit-context ()
  "Show code context."
  (interactive)
  (unless (not (treesit-available-p))
    (local-unset-key (kbd "C-g"))
    (local-set-key (kbd "C-g") 'treesit-context-abort)
    ;; (add-hook 'post-command-hook #'treesit-context--update nil 'local)
    (setq treesit-context--timer (run-with-idle-timer 0.1 t 'treesit-context--update))
    (treesit-context--update)))
#+end_src
å£°æ˜åˆ é™¤çª—å£çš„å‡½æ•°ï¼ˆä¸çŸ¥é“è¯¥æ€ä¹ˆç§°å‘¼è¿™ä¸œè¥¿äº†ï¼‰
#+begin_src emacs-lisp
;;;###autoload
(defun treesit-context-abort ()
  "Abort showing code context."
  (interactive)
  (posframe-hide treesit-context--buffer)
  (local-set-key (kbd "C-g") 'keyboard-quit)
  ;; (kill-buffer treesit-context--buffer)
  ;; (remove-hook 'post-command-hook #'treesit-context--update 'local)
  (when treesit-context--timer
    (cancel-timer treesit-context--timer)))
#+end_src
æˆ‘ä»¬å¯ä»¥æ˜¾ç¤ºåƒ loop,fucntion,condition,class ä¹‹ç±»çš„å„ç§ =tree-sitter node= ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ç»´æŠ¤ä¸€ä¸ªå˜é‡è®°å½•æˆ‘ä»¬è¦æ˜¾ç¤ºä»€ä¹ˆä¸œè¥¿äº†ã€‚
#+begin_src emacs-lisp
;;;###autoload
(defun treesit-context--add-to-list (node)
  "Add the text of the node into `treesit-context--list'."
  (if (or (string= (treesit-node-type node) "struct_specifier")
	      (string= (treesit-node-type node) "function_definition"))
      (progn
	(let* ((text (treesit-node-text node))
	       (buf (generate-new-buffer "*treesit-context-temp-buffer*"))
	       (text-showed nil))
	  (with-current-buffer buf
	    (goto-char (point-min))	    (insert text)
	    (goto-char (point-min))
	    (setq text-showed (buffer-substring
			       (point-min) (line-end-position))))
	  (push text-showed treesit-context--list)
	  (kill-buffer buf)))))
#+end_src
æˆ‘ä»¬éœ€è¦ä» =tree-sitter= ä¸­æŸ¥è¯¢ä¸Šä¸‹æ–‡ä»¥æ˜¾ç¤ºä»£ç å±‚çº§ã€‚
#+begin_src emacs-lisp
;;;###autoload
(defun treesit-context--get-context-from-list ()
  "Get the context of `treesit-context--list'"
  (let ((context ""))
    (dolist (text treesit-context--list)
      (setq context (concat context text "\n")))
    context))
#+end_src
å…‰æ ‡æ˜¯ä¼šåŠ¨çš„ï¼Œå±‚çº§æ˜¯ä¼šå˜åŒ–çš„ï¼Œçª—å£æ˜¯è¦æ›´æ–°çš„ã€‚
#+begin_src emacs-lisp
;;;###autoload
(defun treesit-context--update ()
  "Update `treesit-context--ov'."
  (unless (or (minibufferp) (not (buffer-live-p treesit-context--buffer)))
    (setq treesit-context--list nil)
    (ignore-errors
      (let* ((node (treesit-node-at (point))))
	(cl-loop while node
		 do (treesit-context--add-to-list node)
		 do (setq node (treesit-node-parent node)))))
    (if treesit-context--list
	(progn
	  (with-current-buffer treesit-context--buffer
	    (erase-buffer)
	    (insert (treesit-context--get-context-from-list)))
	  (when (posframe-workable-p)
	    (posframe-show treesit-context--buffer
			   :poshandler #'posframe-poshandler-window-top-right-corner
			   :background-color (face-attribute 'default :background)
			   :border-width 5
			   :border-color (face-attribute 'default :background))))
      (posframe-hide treesit-context--buffer))))
#+end_src
*** vterm-run
**** autoload.el
:PROPERTIES:
:header-args: :tangle modules/baosize/vterm-run/autoload.el
:END:
åˆ¤æ–­æ˜¯å¦å¼€å¯äº† =vterm= æ¨¡å—
#+begin_src emacs-lisp
;;; modules/baosize/vterm-run/autoload.el -*- lexical-binding: t; -*-
;;;###if (modulep! :term vterm)
#+end_src
å°†å†…å®¹å‘é€ç»™ =vterm=
#+begin_src emacs-lisp
;;;###autoload
(defun run-in-vterm (command)
  "Execute string COMMAND in a new vterm.
   Interactively, prompt for COMMAND with the current buffer's file
   name supplied. When called from Dired, supply the name of the
   file at point.
   Like `async-shell-command`, but run in a vterm for full terminal features.
   The new vterm buffer is named in the form `*foo bar.baz*`, the
   command and its arguments in earmuffs.
   When the command terminates, the shell remains open, but when the
   shell exits, the buffer is killed."
  (interactive
   (list
    (let* ((f (cond (buffer-file-name)
                    ((eq major-mode 'dired-mode)
                     (dired-get-filename nil t))))
           (filename (if f
                         (concat " " (shell-quote-argument f))
                       "")))
      (read-shell-command "Terminal command: "
                          (cons filename 0)
                          (cons 'shell-command-history 1)
                          (list filename)))))
  (+vterm/toggle nil)
  (vterm-send-string command)
  (vterm-send-return))
#+end_src
è¿è¡Œä»£ç 
#+begin_src emacs-lisp
;;;###autoload
(defun run-code ()
  "è¿è¡Œä»£ç "
  (interactive)
  (if buffer-file-name
    (let ((file-name (shell-quote-argument
                      (file-name-sans-extension
                       (file-name-nondirectory buffer-file-name))))
          (file-path (shell-quote-argument buffer-file-name))
          (dir (shell-quote-argument
                (if (doom-project-root) (doom-project-root)
                  (file-name-directory buffer-file-name)))))
      (pcase major-mode
        ('c-ts-mode (run-in-vterm (concat "cd " dir " && "
                                        "gcc -O2 -std=c11 -g3 "
                                        file-path
                                        " -o /tmp/c-" file-name
                                        " && /tmp/c-" file-name)))
        ('c++-ts-mode (run-in-vterm (concat "cd " dir " && "
                                          "g++ -O2 -std=c++2c -g3 "
                                          file-path
                                          " -o /tmp/cpp-" file-name
                                          " && /tmp/cpp-" file-name)))
        ('python-ts-mode (run-in-vterm (concat "cd " dir " && "
                                             "python " file-path)))
        (_ (message "not supported"))))
  (message "buffer-file-name is nil")))
#+end_src
è¿›è¡Œä»£ç é”™è¯¯æ£€æŸ¥
#+begin_src emacs-lisp
;;;###autoload
(defun run-cpp-fsanitize ()
  "æ£€æŸ¥æœªå®šä¹‰è¡Œä¸º"
  (interactive)
  (if buffer-file-name
      (let ((filename (file-name-sans-extension (file-name-nondirectory buffer-file-name)))
            (dir (if (doom-project-root) (doom-project-root) (file-name-directory buffer-file-name))))
        (run-in-vterm (concat "cd " dir " && " "clang++ -O2 -std=c++17 -fsanitize=undefined " buffer-file-name " -o /tmp/cpp-" filename " && /tmp/cpp-" filename)))
    (message "buffer-file-name is nil")))
#+end_src
**** config.el
ç»‘å®šä¸€äº›å¿«æ·é”®
#+begin_src emacs-lisp :tangle modules/baosize/vterm-run/config.el
;;; modules/baosize/vterm-run/config.el -*- lexical-binding: t; -*-
(when (modulep! :term vterm)
  (bind-keys ("C-c o TAB" . run-in-vterm)
        ("C-c oo" . run-code)
        ("C-c ot" . +vterm/toggle)
        ("C-c oF" . run-cpp-fsanitize)))
#+end_src
*** winum
åˆ‡æ¢çª—å£æ—¶æ›´é«˜æ•ˆçš„é€‰æ‹©ï¼ˆ Alt + æ•°å­—é”®ï¼‰
***** config.el
#+begin_src emacs-lisp :tangle modules/baosize/winum/config.el 
;;; modules/baosize/winum/config.el -*- lexical-binding: t; -*-
(use-package ace-window
  :custom-face
  (aw-leading-char-face ((t (:inherit font-lock-keyword-face :foreground unspecified :bold t :height 3.0))))
  (aw-minibuffer-leading-char-face ((t (:inherit font-lock-keyword-face :bold t :height 1.0))))
  (aw-mode-line-face ((t (:inherit mode-line-emphasis :bold t))))
  :bind (([remap other-window] . ace-window))
  :hook (emacs-startup . ace-window-display-mode)
  :config
  (setq aw-keys '(?1 ?2 ?3 ?4 ?5 ?6 ?7 ?8 ?9))
  (defun toggle-window-split ()
    (interactive)
    (if (= (count-windows) 2)
        (let* ((this-win-buffer (window-buffer))
               (next-win-buffer (window-buffer (next-window)))
               (this-win-edges (window-edges (selected-window)))
               (next-win-edges (window-edges (next-window)))
               (this-win-2nd (not (and (<= (car this-win-edges)
                                           (car next-win-edges))
                                       (<= (cadr this-win-edges)
                                           (cadr next-win-edges)))))
               (splitter
                (if (= (car this-win-edges)
                       (car (window-edges (next-window))))
                    'split-window-horizontally
                  'split-window-vertically)))
          (delete-other-windows)
          (let ((first-win (selected-window)))
            (funcall splitter)
            (if this-win-2nd (other-window 1))
            (set-window-buffer (selected-window) this-win-buffer)
            (set-window-buffer (next-window) next-win-buffer)
            (select-window first-win)
            (if this-win-2nd (other-window 1))))
      (user-error "`toggle-window-split' only supports two windows")))
  ;; Select widnow via `M-1'...`M-9'
  (defun aw--select-window (number)
    "Selecet the specified window."
    (when (numberp number)
      (let ((found nil))
        (dolist (win (aw-window-list))
          (when (and (window-live-p win)
                     (eq number
                         (string-to-number
                          (window-parameter win 'ace-window-path))))
            (setq found t)
            (aw-switch-to-window win)))
        (unless found
          (message "No specified window: %d" number)))))
  (dotimes (n 9)
    (bind-key (format "M-%d" (1+ n))
              (lambda ()
                (interactive)
                (aw--select-window (1+ n))))))
#+end_src
***** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/winum/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/winum/packages.el
;; (package! winum)
#+end_src
*** symbol-overlay
Emacs æ€å™¨ä¹‹ä¸€ï¼Œé«˜äº®å¤šä¸ªåŒ¹é…å•è¯å¹¶æä¾›é‡å‘½åã€è·³è½¬ç­‰å¤šç§åŠŸèƒ½
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/symbol-overlay/config.el
;;; modules/baosize/symbol-overlay/config.el -*- lexical-binding: t; -*-
(use-package symbol-overlay
    :hook
    (prog-mode . symbol-overlay-mode)
    (text-mode . symbol-overlay-mode)
    :bind
    (("M-i" . symbol-overlay-put)
    ("M-n" . symbol-overlay-switch-forward)
    ("M-p" . symbol-overlay-switch-backward)
    ("<f7>" . symbol-overlay-mode)
    ("<f8>" . symbol-overlay-remove-all)))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/symbol-overlay/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/symbol-overlay/packages.el
(package! symbol-overlay)
#+end_src
*** super-save
è‡ªåŠ¨ä¿å­˜
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/super-save/config.el
;;; modules/baosize/super-save/config.el -*- lexical-binding: t; -*-
(use-package super-save
  :demand t
  :config
  (add-to-list 'super-save-triggers 'switch-window)
  (setq super-save-exclude '(".gpg"))
  (setq super-save-idle-duration 3)
  ;;(setq super-save-all-buffers 1)       ; save all buffer will affect nova temp buffer
  (setq super-save-auto-save-when-idle t)
  (setq super-save-silent t)
  (super-save-mode 1))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/super-save/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/super-save/packages.el
(package! super-save)
#+end_src
*** keyfreq
è®°å½•æŒ‰é”®é¢‘ç‡ï¼Œæ–¹ä¾¿ä¼˜åŒ–
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/keyfreq/config.el
;;; modules/baosize/keyfreq/config.el -*- lexical-binding: t; -*-
(use-package keyfreq
  :hook (doom-first-input . keyfreq-mode)
        (doom-first-input . keyfreq-autosave-mode))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/keyfreq/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/keyfreq/packages.el
(package! keyfreq
  :recipe (:host github :repo "dacap/keyfreq"))
#+end_src
*** colorful-mode
åœ¨æ–‡ä»¶ä¸­å°†é¢œè‰²æ ‡ä¸Šå¯¹åº”é«˜äº®ï¼ˆæ¯”å¦‚"SpringGreen3"åœ¨ =el= æ–‡ä»¶ä¸­ä¼šå˜ç»¿ï¼‰
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/colorful-mode/config.el
;;; modules/baosize/colorful-mode/config.el -*- lexical-binding: t; -*-
(use-package colorful-mode
  :hook (prog-mode text-mode))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/colorful-mode/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/super-save/packages.el
(package! colorful-mode)
#+end_src
*** emacs-lsp-booster
ä¸º lsp-mode å’Œ eglot è¿›è¡ŒåŠ é€Ÿï¼ˆå°† json è½¬æ¢ä¸º elisp å½¢å¼ï¼ŒåŠ é€Ÿè§£æï¼‰

åœ¨ emacs 30 ä¹‹åï¼Œ emacs å¯¹ json çš„è§£æé€Ÿåº¦å·²ç»è¶…è¶Šäº†å¯¹äº emacs-lisp array çš„è§£æé€Ÿåº¦ï¼šï¼‰åˆ°é‚£æ—¶ emacs-lsp-booster å¦‚æœå† parse json é€ æˆçš„å°†æ˜¯è´Ÿä¼˜åŒ–ã€‚
**** config.el
æ²¡å•¥å¥½è¯´çš„ï¼Œéƒ½æ˜¯ä»é¡¹ç›®ä¸»é¡µæŠ„çš„ã€‚
#+begin_src emacs-lisp :tangle modules/baosize/emacs-lsp-booster/config.el
  ;;; modules/baosize/emacs-lsp-booster/config.el
(if (modulep! +eglot)
  (use-package! eglot-booster
    :after eglot
    :init
    (setq eglot-booster-io-only
      ;; JSON parser on 30+ is faster, so we only exploit eglot-booster's IO
      ;; buffering (benefits more talkative LSP servers).
      (and (> emacs-major-version 29)
           (not (functionp 'json-rpc-connection))))
    :config
    (eglot-booster-mode +1))
(progn (defun lsp-booster--advice-json-parse (old-fn &rest args)
  "Try to parse bytecode instead of json."
  (or
    (when (equal (following-char) ?#)
       (let ((bytecode (read (current-buffer))))
         (when (byte-code-function-p bytecode)
           (funcall bytecode))))
     (apply old-fn args)))
    (advice-add (if (progn (require 'json)
                           (fboundp 'json-parse-buffer))
                    'json-parse-buffer
                  'json-read)
                :around
                #'lsp-booster--advice-json-parse)
    (defun lsp-booster--advice-final-command (old-fn cmd &optional test?)
      "Prepend emacs-lsp-booster command to lsp CMD."
      (let ((orig-result (funcall old-fn cmd test?)))
        (if (and (not test?)                             ;; for check lsp-server-present?
                 (not (file-remote-p default-directory)) ;; see lsp-resolve-final-command, it would add extra shell wrapper
                 lsp-use-plists
                 (not (functionp 'json-rpc-connection))  ;; native json-rpc
                 (executable-find "emacs-lsp-booster"))
            (progn
              (when-let ((command-from-exec-path (executable-find (car orig-result))))  ;; resolve command from exec-path (in case not found in $PATH)
                (setcar orig-result command-from-exec-path))
              (message "Using emacs-lsp-booster for %s!" orig-result)
              (cons "emacs-lsp-booster" orig-result))
          orig-result)))
    (advice-add 'lsp-resolve-final-command :around #'lsp-booster--advice-final-command)))

#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/emacs-lsp-booster/packages.el
;; -*- no-byte-compile: t; -*-
;;; modules/baosize/emacs-lsp-booster/packages.el
(when (modulep! +eglot)
  (package! eglot-booster
    :recipe(:host github
            :repo "jdtsmith/eglot-booster")))
#+end_src
**** doctor.el
è¦æ˜¯æ²¡æœ‰ emacs-lsp-booster å¯æ‰§è¡Œæ–‡ä»¶çš„è¯â€¦â€¦
#+begin_src emacs-lisp :tangle modules/baosize/emacs-lsp-booster/doctor.el
;;; modules/baosize/emacs-lsp-booster/doctor.el
(unless (or (executable-find "emacs-lsp-booster") (>= emacs-major-version 30))
  (warn! "LSP will crash when emacs-lsp-booster can't found in PATH!"))
#+end_src
*** nyan
åœ¨ modeline ä¸Šçš„å½©è™¹çŒ«
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/nyan/config.el
;;; modules/baosize/nyan/config.el -*- lexical-binding: t; -*-
(use-package nyan-mode
  :hook (doom-modeline-mode)
  :custom
  ;; (nyan-animate-nyancat t)
  (nyan-wavy-trail t))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/nyan/packages.el
;; -*- no-byte-compile: t -*-
;;; modules/baosize/nyan/packages.el
(package! nyan-mode
  :recipe (:host github
           :repo "zakudriver/nyan-mode"
           :files ("*")))
#+end_src
*** avy-thing-edit
 ç±»ä¼¼äº neovim ä¸­ flash.nvim çš„è¿œç¨‹è·³è½¬ç¼–è¾‘ï¼ˆ =Operator-PENDING mode= ä¸‹çš„ r é”®ï¼‰
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/avy-thing-edit/config.el
;;; modules/baosize/avy-thing-edit/config.el -*- lexical-binding: t; -*-
(use-package thing-edit
  :config
  (use-package avy-thing-edit
    :custom
    (avy-thing-edit-jump-command 'avy-goto-word-0)))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/avy-thing-edit/packages.el
;; -*- no-byte-compile: t -*-
;;; modules/baosize/avy-thing-edit/packages.el
(package! avy-thing-edit
  :recipe (:host github
           :repo "lyjdwh/avy-thing-edit"))
(package! thing-edit
  :recipe (:host github
           :repo "manateelazycat/thing-edit"))
#+end_src
*** super-eglot
æˆ‘å°è¯•ç”¨è¿™ä¸ªæ¨¡å—ä»¥å°† eglot æ‰“é€ å¾—å’Œ vscode ä¸€æ ·ä¼˜ç§€ï¼ˆ lsp-mode æä¾›äº†ä¸€ä¸ªåŸºäº lsp çš„é«˜äº®ï¼Œè¿™å¯¹äº eglot æ¥è¯´æ˜¯æä¸ºå›°éš¾çš„ï¼‰

å®ƒç›®å‰åŒ…å«äº† breadcrumb å’Œ eldoc-box ã€‚
**** config.el
:PROPERTIES:
:header-args: :tangle modules/baosize/super-eglot/config.el
:END:
#+begin_src emacs-lisp
;;; modules/baosize/super-eglot/config.el -*- lexical-binding: t; -*-
#+end_src
é¢åŒ…å±‘å¯¼èˆª
#+begin_src emacs-lisp
(use-package breadcrumb
  :hook (prog-mode . breadcrumb-local-mode))
#+end_src
å¼¹å‡ºæ–‡æ¡£å’Œæç¤º
#+begin_src emacs-lisp
(use-package eldoc-box
  :custom
  (eldoc-box-lighter nil)
  (eldoc-box-only-multi-line t)
  (eldoc-box-clear-with-C-g t)
  :custom-face
  (eldoc-box-border ((t (:inherit posframe-border :background unspecified))))
  (eldoc-box-body ((t (:inherit tooltip))))
  :hook (eglot-managed-mode . eldoc-box-hover-at-point-mode)
  :config
  ;; Prettify `eldoc-box' frame
  (setf (alist-get 'left-fringe eldoc-box-frame-parameters) 8
  (alist-get 'right-fringe eldoc-box-frame-parameters) 8))
#+end_src
code-action æç¤º
#+begin_src emacs-lisp
(use-package sideline
  :hook (eglot-managed-mode . sideline-mode)
  :init
  (setq sideline-backends-left-skip-current-line t   ; don't display on current line (left)
        sideline-backends-right-skip-current-line t  ; don't display on current line (right)
        sideline-order-left 'down                    ; or 'up
        sideline-order-right 'up                     ; or 'down
        sideline-format-left "%s   "                 ; format for left aligment
        sideline-format-right "   %s"                ; format for right aligment
        sideline-priority 100                        ; overlays' priority
        sideline-display-backend-name t))            ; display the backend name
(use-package sideline-eglot
  :init
  (setq sideline-backends-right '(sideline-eglot)))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/super-eglot/packages.el
;; -*- no-byte-compile: t -*-
;;; modules/baosize/super-eglot/packages.el
(package! breadcrumb)
(package! eldoc-box)
(package! sideline)
(package! sideline-eglot
  :recipe (:host github
           :repo "emacs-sideline/sideline-eglot"))
#+end_src
*** dape
ä¸ä¾èµ–äº lsp-mode çš„ DAP æœåŠ¡
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/dape/config.el
;;; modules/baosize/dape/config.el -*- lexical-binding:t; -*-
(use-package dape
    :bind (("<f5>" . dape))
    :custom (dape-buffer-window-arrangment 'right)
    :config
    ;; Save buffers on startup, useful for interpreted languages
    (add-hook 'dape-on-start-hooks
              (defun dape--save-on-start ()
                (save-some-buffers t t))))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/dape/packages.el
;; -*- no-byte-compile: t -*-
;;; modules/baosize/dape/packages.el
(package! dape)
#+end_src
*** gemini-cli
å²ä¸Šæœ€å¼ºç™½å«– AI å·¥å…·
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/gemini-cli/config.el
(use-package gemini-cli
  :defer 2
  :config
  (define-key global-map (kbd "C-c g") gemini-cli-command-map)
  (setq gemini-cli-terminal-backend 'vterm)
  (gemini-cli-mode))
#+end_src
**** packages.el
#+begin_src emacs-lisp :tangle modules/baosize/gemini-cli/packages.el
(package! gemini-cli
  :recipe (:host github :repo "linchen2chris/gemini-cli.el" :branch "main" :files ("*.el" (:exclude "demo.gif"))))
#+end_src
*** showkey
screenkey åœ¨ emacs ä¸Šçš„å®ç°
**** autoload.el
#+begin_src emacs-lisp :tangle modules/baosize/showkey/autoload.el
;;; showkey.el --- Show keys as you use them.
;;
;; Filename: showkey.el
;; Description: Show keys as you use them.
;; Author: Drew Adams
;; Maintainer: Drew Adams
;; Copyright (C) 2014-2022, Drew Adams, all rights reserved.
;; Created: Sun Mar 22 16:24:39 2015 (-0700)
;; Version: 0
;; Package-Requires: ()
;; Last-Updated: Sat Jun 25 10:30:04 2022 (-0700)
;;           By: dradams
;;     Update #: 163
;; URL: https://www.emacswiki.org/emacs/download/showkey.el
;; Doc URL: https://www.emacswiki.org/emacs/ShowKey
;; Keywords: help keys mouse
;; Compatibility: GNU Emacs: 23.x, 24.x, 25.x, 26.x
;;
;; Features that might be required by this library:
;;
;;   `fit-frame'.
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;;; Commentary:
;;
;;    Show key and mouse events and other events as you use them.
;;
;;  There are two ways to show them:
;;
;;  * Show the last key used, in a tooltip.  This is refreshed with
;;    each such event.  For this you use global minor mode
;;    `showkey-tooltip-mode'.
;;
;;  * Show a log of such events, in a separate frame.  It is refreshed
;;    with each event, and it is kept on top of other frames without
;;    stealing the input focus.  For this you use global minor mode
;;    `showkey-log-mode'.
;;
;;  Events that raise an error are not shown.
;;
;;  Several user options control the behavior:
;;
;;  * `showkey-log-frame-alist' is an alist of frame parameters for
;;    the logging frame.  (It is not used for `showkey-tooltip-mode'.)
;;
;;  * `showkey-log-erase-keys' is a list of keys that will each
;;    restart logging, that is, erase the log and start it over.  (It
;;    is not used for `showkey-tooltip-mode'.)
;;
;;  * `showkey-tooltip-height' is the height of the tooltip text, in
;;    units of 1/10 point.  The default value is 100, meaning 10pts.
;;
;;  * `showkey-tooltip-ignored-events' and
;;    `showkey-log-ignored-events' are each a list of regexps to match
;;    against events that you do not want to show, for
;;    `showkey-tooltip-mode' and `showkey-log-mode', respectively.
;;
;;  * `showkey-tooltip-key-only-flag' non-nil means show only the key
;;    used, not also its description.  The default value is nil.
;;
;;  * `showkey-tooltip-sleep-time' is the number of seconds to pause
;;    while showing the tooltip.  This is zero by default, but you
;;    might want to use a positive integer when playing back a
;;    recorded keyboard macro.
;;
;;  * `showkey-tooltip-timeout' is the number of seconds to show the
;;    tooltip, before hiding it.  It is also hidden upon any user
;;    event, such as hitting another key, but it is always shown for
;;    at least `showkey-tooltip-sleep-time' seconds.
;;
;;
;;
;;  Commands defined here:
;;
;;    `showkey-log-mode', `showkey-tooltip-mode'.
;;
;;  User options defined here:
;;
;;    `showkey-log-erase-keys', `showkey-log-frame-alist',
;;    `showkey-tooltip-height', `showkey-log-ignored-events',
;;    `showkey-tooltip-ignored-events',
;;    `showkey-tooltip-key-only-flag', `showkey-tooltip-timeout'.
;;
;;  Faces defined here:
;;
;;    `showkey-log-latest'.
;;
;;  Non-interactive functions defined here:
;;
;;    `showkey-log', `showkey-show-tooltip', `showkey-some'.
;;
;;  Internal variables defined here:
;;
;;    `showkey-insert-cmds', `showkey-last-key-desc',
;;    `showkey-log-frame', `showkey-log-overlay',
;;    `showkey-nb-consecutives'.
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;;; Change Log:
;;
;; 2022/06/25 dadams
;;     showkey-(tooltip|log)-mode: Removed optional args for define-minor-mode - use only keywords.
;; 2018/02/10 dadams
;;     showkey-show-tooltip:
;;       Use selected-frame, not nil, as second arg to x-show-tip.  See Emacs bug #30399.
;; 2017/12/27 dadams
;;     Added: showkey-tooltip-sleep-time.
;;     showkey-show-tooltip: Use showkey-tooltip-sleep-time.
;; 2016/10/27 dadams
;;     Added: showkey-tooltip-timeout.
;;     showkey-show-tooltip: Use showkey-tooltip-timeout.
;; 2016/08/16 dadams
;;     showkey-log-frame-alist: Commented out font spec.
;; 2016/07/04 dadams
;;     showkey-log: Respect showkey-tooltip-key-only-flag too.
;; 2015/05/27 dadams
;;     Added: showkey-tooltip-height, showkey-tooltip-key-only-flag.
;;     showkey-show-tooltip: Respect those new options.
;; 2015/03/22 dadams
;;     Created.
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;; This program is free software: you can redistribute it and/or modify
;; it under the terms of the GNU General Public License as published by
;; the Free Software Foundation, either version 3 of the License, or (at
;; your option) any later version.
;;
;; This program is distributed in the hope that it will be useful, but
;; WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
;; General Public License for more details.
;;
;; You should have received a copy of the GNU General Public License
;; along with GNU Emacs.  If not, see <https://www.gnu.org/licenses/>.
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;;; Code:

(require 'fit-frame nil t) ; fit-frame

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;;###autoload
(defgroup Show-Key nil
  "Show keys as you use them."
  :prefix "showkey-" :group 'help
  :link `(url-link :tag "Send Bug Report"
                   ,(concat "mailto:" "drew.adams" "@" "oracle" ".com?subject=\
showkey.el bug: \
&body=Describe bug here, starting with `emacs -q'.  \
Don't forget to mention your Emacs and library versions."))
  :link '(url-link :tag "Other Libraries by Drew"
          "https://www.emacswiki.org/emacs/DrewsElispLibraries")
  :link '(url-link :tag "Download" "https://www.emacswiki.org/emacs/download/showkey.el")
  :link '(url-link :tag "Description" "https://www.emacswiki.org/emacs/ShowKey")
  :link '(emacs-commentary-link :tag "Commentary" "showkey"))

(defface showkey-log-latest '((t (:foreground "Red")))
  "*Face for latest event logged in buffer `*KEYS*'."
  :group 'Show-Key)

(defcustom showkey-log-erase-keys ()  ;; E.g., '(?\r)
  "List of keys that erase buffer `*KEYS*', so key logging starts over.
For example, if the value is `(?\r)' then `RET' restarts logging.
This is used by `showkey-log-mode'."
  :type '(repeat character) :group 'Show-Key)

(defcustom showkey-log-frame-alist
  `((top  . 50)
    (left . -1)
    (width . 65)
    (menu-bar-lines . 0)
    (tool-bar-lines . 0)
    (minibuffer)
    (left-fringe . 0)
    (right-fringe . 0)
    (name . "*KEYS*")
    (unsplittable . t)
    (user-position . t)
    (horizontal-scroll-bars)
    (vertical-scroll-bars . right)
    (background-color . "LightSteelBlue")
    ;; Choose whatever font you like.  This is what I use:
    ;; (font . "-*-Lucida Console-normal-r-*-*-12-*-*-*-c-*-iso8859-1")
    )
  "Alist of frame parameters for the `*KEYS*' frame of `showkey-log-mode'."
  :type 'alist :group 'Show-Key)

(defcustom showkey-log-ignored-events '("^<mouse-movement>")
  "List of strings naming events to ignore for `showkey-log-mode'.
These events are not logged in buffer `*KEYS*'.

Each string is used as a regexp to match the user-friendly description
of an event.  It should be `^' followed by the event name enclosed in
angle brackets.  Example: \"^<mouse-movement>\"."
  :type '(repeat string) :group 'Show-Key)

(defcustom showkey-tooltip-height 100
  "The height of the tooltip text, in units of 1/10 point."
  :type '(restricted-sexp
          :match-alternatives ((lambda (x) (and (integerp x)  (> x 0))))
          :value 100)
  :group 'Show-Key)

(defcustom showkey-tooltip-ignored-events '("^<mouse-movement>"
                                            "^<vertical-scroll-bar>"
                                            "^<horizontal-scroll-bar>")
  "List of strings naming events to ignore for `showkey-tooltip-mode'.
These events are not logged in buffer `*KEYS*'.

Each string is used as a regexp to match the user-friendly description
of an event.  It should be `^' followed by the event name enclosed in
angle brackets.  Example: \"^<mouse-movement>\"."
  :type '(repeat string) :group 'Show-Key)

(defcustom showkey-tooltip-key-only-flag nil
  "Non-nil means show only the key used, not also its description."
  :type 'boolean :group 'Show-Key)

(defcustom showkey-tooltip-sleep-time 0
  "Minimum number of seconds to pause while showing the tooltip."
  :type 'integer :group 'Show-Key)

(defcustom showkey-tooltip-timeout 5
  "Hide tooltip after this many seconds.
It is also hidden upon any user event, such as hitting another key,
but it is always shown for at least `showkey-tooltip-sleep-time'
seconds."
  :type 'integer :group 'Show-Key)

(defvar showkey-nb-consecutives 1
  "Counter of how many times the current key has been pressed.")

(defvar showkey-insert-cmds '(self-insert-command icicle-self-insert)
  "List of commands to treat as self-inserting.")

(defvar showkey-last-key-desc "" "`key-description' of last key used.")

(defvar showkey-log-frame nil
  "Frame used for logging keys.")

(defvar showkey-log-overlay nil
  "Overlay for latest event logged in buffer `*KEYS*'.")


;;;###autoload
(define-minor-mode showkey-tooltip-mode
    "Global minor mode that shows the keys you use, using a tooltip.
See option `showkey-tooltip-ignored-events' for customization.

Note that keys such as `C-g' that quit, and keys that raise an error,
are not logged.

See also minor mode `showkey-log-mode'."
  :global t
  (if showkey-tooltip-mode
      (add-hook 'pre-command-hook 'showkey-show-tooltip 'APPEND)
    (x-hide-tip)
    (remove-hook 'pre-command-hook 'showkey-show-tooltip)))

(defun showkey-show-tooltip ()
  "Global minor mode that shows the keys you use in a tooltip.
See options `showkey-tooltip-height',
`showkey-tooltip-ignored-events', `showkey-tooltip-key-only-flag',
`showkey-tooltip-sleep-time', and `showkey-tooltip-timeout'.

Note that keys such as `C-g' that quit, and keys that raise an error,
are not indicated."
  (let* ((key       (this-single-command-keys))
         (key-desc  (key-description key)))
    (unless (or (equal [] key)
                (showkey-some showkey-tooltip-ignored-events key-desc #'string-match-p))
      (let* ((event      (if (and (symbolp (aref key 0))
                                  (> (length key) 1)
                                  (consp (aref key 1)))
                             (aref key 1)
                           (aref key 0)))
             (modifiers  (event-modifiers event))
             (mouse-msg  (if (or (memq 'click modifiers)
                                 (memq 'down modifiers)
                                 (memq 'drag modifiers))
                             " at that spot"
                           ""))
             (cmd-desc   (format "%s" key-desc)))
        (unless showkey-tooltip-key-only-flag
          (setq cmd-desc  (format "%s%s runs the command `%S'"
                                  cmd-desc mouse-msg (key-binding key t))))
        ;; Accumulate self-inserting chars, with no command descriptions.
        ;; Otherwise, show command description.
        (cond ((member this-command showkey-insert-cmds)
               (when (equal key-desc "SPC") (setq key-desc  " "))
               (unless (member last-command showkey-insert-cmds)
                 (setq showkey-last-key-desc  ""))
               (setq cmd-desc               (concat showkey-last-key-desc key-desc)
                     showkey-last-key-desc  (concat showkey-last-key-desc key-desc)))
              ((eq this-command last-command)
               (setq cmd-desc                 (format "[%d]%s"
                                                      showkey-nb-consecutives cmd-desc)
                     showkey-nb-consecutives  (1+ showkey-nb-consecutives)
                     showkey-last-key-desc    key-desc))
              (t
               (setq showkey-nb-consecutives  1
                     showkey-last-key-desc    key-desc)))
        (let* ((x.y  (posn-actual-col-row (posn-at-point (point))))
               (x    (car x.y))
               (y    (cdr x.y)))
          (when (string= "" mouse-msg)
            (set-mouse-position (selected-frame) (+ 3 x) (+ 2 y))))
        (x-show-tip (propertize cmd-desc
                                'face `(:foreground "red" :height ,showkey-tooltip-height))
                    (selected-frame)    ; Emacs bug #30399 says nil is broken for Emacs < 27
                    nil
                    showkey-tooltip-timeout)
        (sleep-for showkey-tooltip-sleep-time)))))

;;;###autoload
(define-minor-mode showkey-log-mode
    "Global minor mode that logs the keys you use.
See options `showkey-log-erase-keys', `showkey-log-ignored-events',
and `showkey-log-frame-alist' for customization.

Note that keys such as `C-g' that quit, and keys that raise an error,
are not logged.

See also minor mode `showkey-tooltip-mode'."
  :global t
  (cond (showkey-log-mode
         (unless (get-buffer "*KEYS*")
           (let ((pop-up-frames                t)
                 (oframe                       (selected-frame))
                 (default-frame-alist          showkey-log-frame-alist)
                 (special-display-frame-alist  showkey-log-frame-alist)
                 (w32-grab-focus-on-raise      nil))
             (save-selected-window
               (with-help-window "*KEYS*"
                 (with-current-buffer "*KEYS*"
                   (insert "************ KEYS ************\n\n")))
               (setq showkey-log-frame  (selected-frame)))
             (select-frame-set-input-focus oframe)
             (raise-frame showkey-log-frame))
           (add-hook 'pre-command-hook 'showkey-log 'APPEND)))
        (t
         (when (get-buffer "*KEYS*")
           (remove-hook 'pre-command-hook 'showkey-log)
           (kill-buffer "*KEYS*")))))

(defun showkey-log ()
  "Log the current key in buffer `*KEYS*'."
  (let* ((key       (this-single-command-keys))
         (key-desc  (key-description key)))
    (unless (or (equal [] key)
                (showkey-some showkey-log-ignored-events key-desc #'string-match-p)
                (not (get-buffer-window "*KEYS*" 0)))
      (let* ((event                    (if (and (symbolp (aref key 0))
                                                (> (length key) 1)
                                                (consp (aref key 1)))
                                           (aref key 1)
                                         (aref key 0)))
             (modifiers                (event-modifiers event))
             (mouse-msg                (if (or (memq 'click modifiers)
                                               (memq 'down modifiers)
                                               (memq 'drag modifiers))
                                           " at that spot"
                                         ""))

             (cmd-desc                 (if showkey-tooltip-key-only-flag
                                           (format "%s" key-desc)
                                         (format "%s%s runs the command `%S'"
                                                 key-desc mouse-msg (key-binding key t))))
             (w32-grab-focus-on-raise  nil))
        (save-selected-window
          (select-window (get-buffer-window "*KEYS*" 0))
          (setq showkey-log-frame  (selected-frame))
          (raise-frame showkey-log-frame)
          (with-current-buffer "*KEYS*"
            (let ((inhibit-read-only  t))
              (goto-char (point-max))
              (if (memq (aref key 0) showkey-log-erase-keys)
                  ;; Key in `showkey-log-erase-keys', so erase buffer.
                  (progn (insert "\n") (insert key-desc) (sit-for 1) (erase-buffer)
                         (insert "************ KEYS ************\n\n"))
                ;; Keep self-inserting chars on same line.  Otherwise, start a new line.
                (cond ((member this-command showkey-insert-cmds)
                       (unless (member last-command showkey-insert-cmds) (insert "\n"))
                       (insert (if (equal key-desc "SPC") " " key-desc)))
                      (t
                       (insert "\n")
                       (cond ((eq this-command last-command)
                              (save-excursion
                                (forward-line -1)
                                (setq showkey-nb-consecutives  (1+ showkey-nb-consecutives))
                                (if (looking-at "^\[[0-9]+\]")
                                    (replace-match (format "[%d]" showkey-nb-consecutives))
                                  (insert (format "[%d]" showkey-nb-consecutives))))
                              (backward-delete-char 1)) ; the \n
                             (t
                              (setq showkey-nb-consecutives  1)
                              (insert cmd-desc)))))
                (let ((bol  (line-beginning-position))
                      (eol  (line-end-position)))
                  (if showkey-log-overlay ; Don't re-create it.
                      (move-overlay showkey-log-overlay bol eol (current-buffer))
                    (setq showkey-log-overlay  (make-overlay bol eol))
                    (overlay-put showkey-log-overlay 'face 'showkey-log-latest)))
                (when (fboundp 'fit-frame)
                  (with-selected-window (get-buffer-window "*KEYS*" 0) (fit-frame)))))))))))

;; Same as `icicle-some'.
(defun showkey-some (list arg2 predicate)
  "Apply binary PREDICATE successively to ARG1 and an item of LIST.
Return the first non-nil value returned by PREDICATE, or nil if none.
PREDICATE must be a function with two required arguments."
  (let ((result  nil))
    (catch 'icicle-some
      (dolist (arg1  list)
        (when (setq result  (funcall predicate arg1 arg2))  (throw 'icicle-some result))))
    result))

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(provide 'showkey)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; showkey.el ends here
#+end_src
**** config.el
#+begin_src emacs-lisp :tangle modules/baosize/showkey/config.el
(add-hook 'doom-first-input-hook #'showkey-log-mode)
#+end_src
